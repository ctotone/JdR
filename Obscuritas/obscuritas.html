<input type="hidden" name="attr_page" class="choix_page" value="0">
<input type="hidden" name="attr_valeur_aura" class="valeur_aura" value="0">
<input type="hidden" name="attr_niveau_aura" class="niveau_aura" value="0">
<input type="hidden" name="attr_niveau_sm" class="niveau_sm" value="0">
<input type="hidden" name="attr_heroisme" class="points_heroisme" value="0">
<input type="hidden" name="attr_heresie" class="points_heresie" value="0">
<input type="hidden" name="attr_avatar" class="choix_avatar" value="0">
<input type="hidden" name="attr_armure_affichee" class="choix_armure" value="0">
<input type="hidden" name="attr_bouclier_affichee" class="choix_bouclier" value="0">
<input type="hidden" name="attr_info_reduit" class="voir_info" value="0">
<input type="hidden" name="attr_hero_reduit" class="voir_hero" value="0">
<input type="hidden" name="attr_carac_reduit" class="voir_carac" value="0">
<input type="hidden" name="attr_competence_reduit" class="voir_competence" value="0">
<input type="hidden" name="attr_armement_reduit" class="voir_armement" value="0">
<input type="hidden" name="attr_inventaire_reduit" class="voir_inventaire" value="0">
<input type="hidden" name="attr_malus_total_dexterite" value="0">
<input type="hidden" name="attr_malus_total_athletisme" value="0">
<input type="hidden" name="attr_malus_total_combat_cac" value="0">
<input type="hidden" name="attr_malus_total_combat_puglilat" value="0">
<input type="hidden" name="attr_malus_total_combat_distance" value="0">
<input type="hidden" name="attr_malus_total_discretion" value="0">
<input type="hidden" name="attr_malus_total_esquive" value="0">
<input type="hidden" name="attr_malus_blessure" value="0">
<input type="hidden" name="attr_total_armures_malus_combat_cac" value="0">
<input type="hidden" name="attr_total_armures_malus_demi_dexterite" value="0">
<input type="hidden" name="attr_total_armures_malus_athletisme" value="0">
<input type="hidden" name="attr_total_armures_malus_combat_pugilat" value="0">
<input type="hidden" name="attr_total_armures_malus_combat_distance" value="0">
<input type="hidden" name="attr_total_armures_malus_discretion" value="0">
<input type="hidden" name="attr_total_armures_malus_esquive" value="0">
<input type="hidden" name="attr_total_boucliers_malus_discretion" value="0">
<input type="hidden" name="attr_total_boucliers_malus_esquive" value="0">
<input type="hidden" name="attr_sm" value="0">
<input type="hidden" name="attr_alerte_sm_50" value="0">
<input type="hidden" name="attr_alerte_sm_25" value="0">
<input type="hidden" name="attr_alerte_sm_75" value="0">
<input type="hidden" name="attr_popup_sm" class="popup_sm" value="0">
<input type="hidden" name="attr_bonus_force" value="0">
<input type="hidden" name="attr_bonus_dexterite" value="0">
<input type="hidden" name="attr_bonus_reussite" value="0">
<input type="hidden" name="attr_armes_designation_1" value="Pugilat, Boxe, Lutte">
<input type="hidden" name="attr_armes_degats_1" value="1">
<input type="hidden" name="attr_armes_effet_1" value=" "> 
<input type="hidden" name="attr_armes_designation_2" value=" ">
<input type="hidden" name="attr_armes_degats_2" value="1"> 
<input type="hidden" name="attr_armes_effet_2" value=" "> 
<input type="hidden" name="attr_armes_designation_3" value=" ">
<input type="hidden" name="attr_armes_degats_3" value="1">
<input type="hidden" name="attr_armes_effet_3" value=" ">  
<input type="hidden" name="attr_armes_designation_4" value=" ">
<input type="hidden" name="attr_armes_degats_4" value="1">
<input type="hidden" name="attr_armes_effet_4" value=" ">  
<input type="hidden" name="attr_DMG_1" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_1}}} {{result=[[@{armes_degats_1}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_1}}}">
<input type="hidden" name="attr_DMG_1_distance" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_1}}} {{result=[[@{armes_degats_1}[Dégâts de base]+@{bonus_dexterite}[Bonus de Dextérité]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_1}}}">
<input type="hidden" name="attr_DMG_2" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_2}}} {{result=[[@{armes_degats_2}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_2}}}">
<input type="hidden" name="attr_DMG_2_distance" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_2}}} {{result=[[@{armes_degats_2}[Dégâts de base]+@{bonus_dexterite}[Bonus de Dextérité]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_2}}}">
<input type="hidden" name="attr_DMG_3" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_3}}} {{result=[[@{armes_degats_3}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_3}}}">
<input type="hidden" name="attr_DMG_3_distance" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_3}}} {{result=[[@{armes_degats_3}[Dégâts de base]+@{bonus_dexterite}[Bonus de Dextérité]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_3}}}">
<input type="hidden" name="attr_DMG_4" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_4}}} {{result=[[@{armes_degats_4}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_4}}}">
<input type="hidden" name="attr_DMG_4_distance" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_4}}} {{result=[[@{armes_degats_4}[Dégâts de base]+@{bonus_dexterite}[Bonus de Dextérité]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_4}}}">
<button type="roll" name="roll_weapon_dmg_1" style="display: none;" value="@{DMG_1}"></button> 
<button type="roll" name="roll_weapon_dmg_2" style="display: none;" value="@{DMG_2}"></button>
<button type="roll" name="roll_weapon_dmg_3" style="display: none;" value="@{DMG_3}"></button>
<button type="roll" name="roll_weapon_dmg_4" style="display: none;" value="@{DMG_4}"></button>
<button type="roll" name="roll_weapon_dmg_1_distance" style="display: none;" value="@{DMG_1_distance}"></button> 
<button type="roll" name="roll_weapon_dmg_2_distance" style="display: none;" value="@{DMG_2_distance}"></button>
<button type="roll" name="roll_weapon_dmg_3_distance" style="display: none;" value="@{DMG_3_distance}"></button>
<button type="roll" name="roll_weapon_dmg_4_distance" style="display: none;" value="@{DMG_4_distance}"></button>

<div class="menu">
    <button type="action" name="act_0" class="button0" style="margin-left: 2px;box-shadow: 0px 1px 6px 0px var(--color_ombre_button);">Personnage</button>
    <button type="action" name="act_6" class="button6">Hérésie et Héroïsme</button>
    <button type="action" name="act_1" class="button1">Caractéristiques</button>
    <button type="action" name="act_2" class="button2">Compétences</button>
    <button type="action" name="act_3" class="button3">Équipement</button>
    <button type="action" name="act_4" class="button4">Notes</button>
    <button type="action" name="act_7" class="button7" style="margin-left: 85px;">Compendium</button>
    <button type="action" name="act_5" class="button5"><span class="picto" style="padding-left: 5px;">y</span></button>
</div>

<div class="sm_75">
    Votre Santé Mentale vient de repasser au dessus de 75%.<br><br>
Aviser le MJ de cela puis fermer cette popup...
<button type="action" class="button_carac" name="act_fermer-popup" style="font-family: 'Pictos';font-weight: normal;color: var(--white);font-size: 32px;line-height: 55px;height: 30px;margin-top: -340px;margin-left: 0px;margin-right: -7px;">*</button></div>
<div class="sm_50">Votre Santé Mentale se trouve entre 50% et 26%.<br><br>
Aviser le MJ de cela puis fermer cette popup...
<button type="action" class="button_carac" name="act_fermer-popup" style="font-family: 'Pictos';font-weight: normal;color: var(--white);font-size: 32px;line-height: 55px;height: 30px;margin-top: -340px;margin-left: 0px;margin-right: -7px;">*</button></div>
<div class="sm_25">Votre Santé Mentale vient d'atteindre 25%.<br><br>
Aviser le MJ de cela puis fermer cette popup...
<button type="action" class="button_carac" name="act_fermer-popup" style="font-family: 'Pictos';font-weight: normal;color: var(--white);font-size: 32px;line-height: 55px;height: 30px;margin-top: -340px;margin-left: 0px;margin-right: -7px;">*</button></div>


<div class="page_complete">
    <!-- Information personnage -->
    <div class="personnage">
        <div class="wrapper_page_1">
            <input type="hidden" name="attr_page" class="choix_page" value="0">
            <!-- Banniere et titre -->
            <!-- <div class="cadre_titre">
                <div class="wrapper_titre">
                    <div class="titre_logo"></div>
                    <div class="titre_titre">OBSCURITAS AETERNA</div> 
                </div>
            </div> -->
            <!-- AURA -->
            <div class="cadre_aura">
                <div class="wrapper_zone_personnage">
                    <input type="hidden" name="attr_niveau_aura" class="niveau_aura" value="0">
                    <div class="background_aura"></div>
                    <div class="barre_aura"></div>
                    <div class="centre_aura"></div>
                    <div class="demon_aura"></div>
                    <div class="ange_aura"></div>
                    <div class="obscuritas">Obscuritas</div>
                    <div class="aeterna">Æterna</div>
                    <div class="boutton_aura"><button type="action" class="button_aura" name="act_roll-aura">AURA</button></div>
                    <div class="marqueur_aura_0"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_1"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_2"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_3"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_4"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_5"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_6"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_7"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_8"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_9"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_10"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n1"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n2"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n3"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n4"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n5"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n6"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n7"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n8"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n9"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                    <div class="marqueur_aura_n10"><input type="number" class="input_aura" name="attr_aura" value="0"></div>
                </div>  
            </div>
                    
            <!-- INFORMATIONS -->
            <input type="hidden" name="attr_info_reduit" class="voir_info" value="0">
            <div class="cadre_info_reduit">
                <div class="wrapper_zone_personnage">
                    <div class="zone_info_titre">PERSONNAGE<button type="action" class="button_show" name="act_hide_info" title="Afficher / Cacher" ><span class="picto">|</span></button></div>
                </div>
            </div>
            <div class="cadre_info">
                <div class="wrapper_zone_personnage">
                    <div class="zone_info_titre">PERSONNAGE<button type="action" class="button_show" name="act_hide_info" title="Afficher / Cacher" ><span class="picto">|</span></button></div>
                    <!-- Gauche -->
                    <div class="zone_info_gauche">
                        <div class="wrapper_zone_info">   
                            <div class="info_data"><input name="attr_character_name" type="text" spellcheck="false" class="input_ligne" /></div>
                            <div class="info_titre">NOM</div>
                        </div>
                        <div class="wrapper_zone_info">
                            <div class="info_data" style="margin-right: 15px;"><input name="attr_profession" type="text" spellcheck="false" class="input_ligne" /></div>
                            <div class="info_titre">PROFESSION ET RÔLE</div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-right: 25px;">
                            <div class="info_data"><input name="attr_apparence1" type="text" spellcheck="false" class="input_ligne" /></div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-top: 0px;margin-right: 25px;">
                            <div class="info_data"><input name="attr_apparence2" type="text" spellcheck="false" class="input_ligne" /></div>
                            <div class="info_titre">APPARENCE</div>
                        </div>
                        <div class="wrapper_zone_info">
                            <div class="info_data" style="margin-right: 15px;"><input name="attr_origine1" type="text" spellcheck="false" class="input_ligne" /></div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-top: 0px;">
                            <div class="info_data"><input name="attr_origine2" type="text" spellcheck="false" class="input_ligne" /></div>
                            <div class="info_titre">ORIGINE</div>
                        </div>
                    </div>
                    <!-- Droite -->
                    <div class="zone_info_droite">
                        <div class="wrapper_zone_info">
                            <div class="info_data"><input name="attr_caractere1" type="text" spellcheck="false" class="input_ligne_droite" /></div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-top: 0px;margin-left: 7px;">
                            <div class="info_data"><input name="attr_caractere2" type="text" spellcheck="false" class="input_ligne_droite" /></div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-top: 0px;margin-left: 15px;">
                            <div class="info_data"><input name="attr_caractere3" type="text" spellcheck="false" class="input_ligne_droite" /></div>
                            <div class="info_titre">CARACTÈRE ET PERSONNALITÉ</div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-left: 25px;">                    
                            <div class="info_data"><input name="attr_croyance1" type="text" spellcheck="false" class="input_ligne_droite" /></div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-left: 25px;">
                            <div class="info_data"><input name="attr_croyance2" type="text" spellcheck="false" class="input_ligne_droite" /></div>
                            <div class="info_titre">CROYANCES ET CONVICTIONS</div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-left: 15px;"">
                            <div class="info_data"><input name="attr_condition1" type="text" spellcheck="false" class="input_ligne_droite" /></div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-top: 0px;">
                            <div class="info_data"><input name="attr_condition2" type="text" spellcheck="false" class="input_ligne_droite" /></div>
                            <div class="info_titre">CONDITION PHYSIQUE</div>
                        </div>
                    </div> 
                    <!-- Centre -->
                    <div class="zone_info_avatar">
                        <div class="wrapper_zone_info">
                            <input type="hidden" name="attr_avatar" class="choix_avatar" value="0">
                            <div class="info_avatar"><img class="portrait" name="attr_character_token"></div>
                            <div class="info_avatar_aude"></div>
                            <div class="info_avatar_einarth"></div>
                            <div class="info_avatar_felix"></div>
                            <div class="info_avatar_baudoin"></div>
                            <div class="info_avatar_mathilde"></div>
                            <div class="info_avatar_robert"></div>
                            <div class="zone_bouton_avatar"><button type="action" class="button_avatar" name="act_change_avatar"></button></div>
                        </div>
                    </div>
                    <div class="zone_info_background" style="margin-top: 15px;">
                        <div class="wrapper_zone_info">
                            <div class="info_titre" style="text-align: center;grid-row: 1;margin-top: -20px;">HISTOIRE PERSONNELLE</div>
                            <div class="info_data" style="grid-row: 1;"><input name="attr_background1" type="text" spellcheck="false" class="input_ligne" style="text-align: center;"></div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-top: 0px;">
                            <div class="info_data"><input name="attr_background2" type="text" spellcheck="false" class="input_ligne" style="text-align: center;"></div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-top: 0px;">
                            <div class="info_data"><input name="attr_background3" type="text" spellcheck="false" class="input_ligne" style="text-align: center;"></div>
                        </div>
                        <div class="wrapper_zone_info" style="margin-top: 0px;">
                            <div class="info_data"><input name="attr_background4" type="text" spellcheck="false" class="input_ligne" style="text-align: center;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- HÉROISME HERESIE -->
            <input type="hidden" name="attr_hero_reduit" class="voir_hero" value="0">
            <div class="cadre_hero_reduit">
                <div class="wrapper_zone_personnage">
                    <div class="zone_hero_titre" style="padding-left: 10px;"><button type="action" class="button_show" name="act_hide_hero" title="Afficher / Cacher" style="margin-right: 10px;"><span class="picto">|</span></button> HÉROÏSME et HÉRÉSIE</div>
                </div>
            </div>
            <div class="cadre_hero">
                <div class="wrapper_zone_personnage">
                    <div class="zone_hero_titre" style="padding-left: 10px;"><button type="action" class="button_show" name="act_hide_hero" title="Afficher / Cacher" style="margin-right: 10px;"><span class="picto">|</span></button> HÉROÏSME et HÉRÉSIE</div>
                    <!-- Info -->
                    <!-- <div class="zone_hero_info">Ce cadre vous permet de mettre à jour vos scores d'Hérésie et d'Héroisme (L'Aura étant elle, automatiquement mise à jour).<br>Chaque palier d'Aura qui aura était atteint fera apparaitre les bonus qui en découlent.</div> -->
                    <div class="zone_hero_here_aura_hero">
                        <div class="wrapper_zone_hero_here_aura_hero">
                            <!-- Titre -->
                            <div class="hero_titre_heresie">HÉRÉSIE</div>
                            <div class="hero_heresie_data">
                                <button type="action" class="button_here_hero" name="act_heresie_moins" title="Retirer 1 point d'hérésie" style="background: #651d17;"><span class="picto">_</span></button>
                                <input type="number" class="input_hero_here" name="attr_heresie" value="0" style="background: #651d17;" readonly>
                                <button type="action" class="button_here_hero" name="act_heresie_plus"  title="Ajouter 1 point d'hérésie" style="background: #651d17;"><span class="picto">&</span></button></div>
                            <div class="hero_titre_aura">AURA</div>
                            <div class="hero_aura_data_habillage">
                                <input type="number" class="input_hero_here" name="attr_aura" value="0" style="border: none;font-size: 26px;">
                            </div>
                            <div class="hero_titre_heroisme">HÉROÏSME</div>
                            <div class="hero_heroisme_data">
                                <button type="action" class="button_here_hero" name="act_heroisme_moins" title="Retirer 1 point d'héroïsme" style="background: #6875a7;"><span class="picto">_</span></button>
                                <input type="number" class="input_hero_here" name="attr_heroisme" value="0" style="background: #6875a7;" readonly>
                                <button type="action" class="button_here_hero" name="act_heroisme_plus" title="Retirer 1 point d'héroïsme" style="background: #6875a7;"><span class="picto">&</span></button>
                            </div>
                        </div>
                    </div>
                    <!-- Gauche -->
                    <div class="zone_hero_gauche">
                        <div class="wrapper_zone_hero">
                            <div class="habillage_tableau" style="
                            margin-right: 25px;
                        ">
                                <div class="wrapper_zone_hero">
                                    <div class="hero_aura_titre_effet" style="
                                    font-size: 11px;
                                    background: black;
                                    border: 1px solid black;
                                    border-radius: 5px 5px 0px 0px;
                                    color: var(--white);
                                ">
                                        Utilisation des Points d’Hérésie :
                                    </div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">1 point</div>
                                    <div class="hero_tableau_effet">• Malus de 20 sur un jet crucial<br>
                                        • Le personnage subit les dégâts maximum lors d’une attaque</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_4">2 Points</div>
                                    <div class="hero_tableau_effet_4">• Le joueur doit relancer un jet réussi<br>
                                        • Ajoute un effet de peur ou une vision macabre dans la scène</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">3 Points</div>
                                    <div class="hero_tableau_effet">• Perte de 20 points de santé mentale<br>
                                        • Bloque la magie du personnage pour la durée de la scène</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout" style="border-bottom: 1px solid black;">7 Points</div>
                                    <div class="hero_tableau_effet" style="border-bottom: 1px solid black;font-weight: bold;font-size: 13px;text-align: center !important;">La possession des ténèbres</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Droite -->
                    <div class="zone_hero_droite">
                        <div class="wrapper_zone_hero">
                            <div class="habillage_tableau" style="
                            margin-left: 25px;
                        ">
                                <div class="wrapper_zone_hero">
                                    <div class="hero_aura_titre_effet" style="
                                    font-size: 11px;
                                    background: black;
                                    border: 1px solid black;
                                    border-radius: 5px 5px 0px 0px;
                                    color: var(--white);
                                ">
                                        Utilisation des Points d’Héroïsme :
                                    </div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">1 point</div>
                                    <div class="hero_tableau_effet">• Bonus de +20 sur un jet<br>
                                        • Dégâts maximum sur une attaque</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_4">2 Points</div>
                                    <div class="hero_tableau_effet_4">• Relancer un jet échoué<br>
                                        • Résister à un effet de peur ou d’influence<br>
                                        • Lancer gratuitement un sort moyen ou faible</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">3 Points</div>
                                    <div class="hero_tableau_effet">• Récupérer 20 points de santé mentale<br>
                                        • Lancer gratuitement un sort puissant</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout" style="border-bottom: 1px solid black;">7 Points</div>
                                    <div class="hero_tableau_effet" style="border-bottom: 1px solid black;font-weight: bold;font-size: 13px;">Révèle le héros en toi !</div>
                                </div>
                            </div>
                        </div>    
                    </div> 
                    <!-- Aura centre -->
                    <div class="zone_hero_aura">
                        <div class="wrapper_zone_hero">
                            <!-- Affichage dynamique tableau des effets aura -->
                            <input type="hidden" name="attr_valeur_aura" class="valeur_aura" value="0">
                            <!-- Aura neutre -->
                             <div class="niveau_aura_0">
                                <div class="wrapper_zone_hero">
                                    <div class="habillage_tableau" style="margin-left: 25px;">
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                                Effet de l'aura :
                                            </div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout" style="color: #00000036;">13 à 25</div>
                                            <div class="hero_tableau_effet" style="color: #00000036;">• Aura "bonne"<br>
                                                • Permet d’utiliser certains artefacts bénis</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">-12 à 12</div>
                                            <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_7" style="border-bottom: 1px solid black;color: #00000036;">-13 à -25</div>
                                            <div class="hero_tableau_effet_7" style="border-bottom: 1px solid black;color: #00000036;">• Aura "néfaste"<br>
                                                • Impossible d’utiliser certains artefacts bénis (même en mode héroïque)<br>
                                                • Peut subir des dégâts supplémentaires sur les attaques bénies<br></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Aura +1 -->
                             <div class="niveau_aura_1">
                                <div class="wrapper_zone_hero">
                                    <div class="habillage_tableau" style="margin-left: 25px;">
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                                Effet de l'aura :
                                            </div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">-12 à 12</div>
                                            <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">13 à 25</div>
                                            <div class="hero_tableau_effet">• Aura "bonne"<br>
                                                • Permet d’utiliser certains artefacts bénis</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout" style="color: #00000036;">26 à 49</div>
                                            <div class="hero_tableau_effet" style="color: #00000036;">• Le personnage est automatiquement stabilisé en arrivant à 0 points de vie</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_4" style="border-bottom: 1px solid black;color: #00000036;">50 ou plus</div>
                                            <div class="hero_tableau_effet_4" style="border-bottom: 1px solid black;color: #00000036;">• Le paradis te connaît et te favorise<br>
                                                • Certains avantages arrivent spontanément en cas de besoin<br>
                                                • Chance de résurrection en cas de mort</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Aura +2 -->
                             <div class="niveau_aura_2">
                                <div class="wrapper_zone_hero">
                                    <div class="habillage_tableau" style="margin-left: 25px;">
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                                Effet de l'aura :
                                            </div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">-12 à 12</div>
                                            <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">13 à 25</div>
                                            <div class="hero_tableau_effet">• Aura "bonne"<br>
                                                • Permet d’utiliser certains artefacts bénis</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">26 à 49</div>
                                            <div class="hero_tableau_effet">• Le personnage est automatiquement stabilisé en arrivant à 0 points de vie</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_4" style="border-bottom: 1px solid black;color: #00000036;">50 ou plus</div>
                                            <div class="hero_tableau_effet_4" style="border-bottom: 1px solid black;color: #00000036;">• Le paradis te connaît et te favorise<br>
                                                • Certains avantages arrivent spontanément en cas de besoin<br>
                                                • Chance de résurrection en cas de mort</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Aura +3-->
                             <div class="niveau_aura_3">
                                <div class="wrapper_zone_hero">
                                    <div class="habillage_tableau" style="margin-left: 25px;">
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                                Effet de l'aura :
                                            </div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">-12 à 12</div>
                                            <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">13 à 25</div>
                                            <div class="hero_tableau_effet">• Aura "bonne"<br>
                                                • Permet d’utiliser certains artefacts bénis</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">26 à 49</div>
                                            <div class="hero_tableau_effet">• Le personnage est automatiquement stabilisé en arrivant à 0 points de vie</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_4" style="border-bottom: 1px solid black">50 ou plus</div>
                                            <div class="hero_tableau_effet_4" style="border-bottom: 1px solid black;">• Le paradis te connaît et te favorise<br>
                                                • Certains avantages arrivent spontanément en cas de besoin<br>
                                                • Chance de résurrection en cas de mort</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Aura -1 -->
                             <div class="niveau_aura_m1">
                                <div class="wrapper_zone_hero">
                                    <div class="habillage_tableau" style="margin-left: 25px;">
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                                Effet de l'aura :
                                            </div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">-12 à 12</div>
                                            <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_7">-13 à -25</div>
                                            <div class="hero_tableau_effet_7">• Aura "néfaste"<br>
                                                • Impossible d’utiliser certains artefacts bénis (même en mode héroïque)<br>
                                                • Peut subir des dégâts supplémentaires sur les attaques bénies<br></div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_4" style="color: #00000036;">-26 à -49</div>
                                            <div class="hero_tableau_effet_4" style="color: #00000036;">• Mort instantanée en arrivant à 0 points de vie<br>
                                                • L’âme est attendue en enfer<br>
                                                • Obtient une résistance aux malédictions et sorts<br></div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout" style="border-bottom: 1px solid black;color: #00000036;">-50 ou moins</div>
                                            <div class="hero_tableau_effet" style="border-bottom: 1px solid black;color: #00000036;">• Les enfers te connaissent et les démons te recherchent<br>
                                                • En cas de mort, possibilité de revenir sous une autre forme (au choix du MJ)</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Aura -2 -->
                             <div class="niveau_aura_m2">
                                <div class="wrapper_zone_hero">
                                    <div class="habillage_tableau" style="margin-left: 25px;">
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                                Effet de l'aura :
                                            </div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">-12 à 12</div>
                                            <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_7">-13 à -25</div>
                                            <div class="hero_tableau_effet_7">• Aura "néfaste"<br>
                                                • Impossible d’utiliser certains artefacts bénis (même en mode héroïque)<br>
                                                • Peut subir des dégâts supplémentaires sur les attaques bénies<br></div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_4">-26 à -49</div>
                                            <div class="hero_tableau_effet_4">• Mort instantanée en arrivant à 0 points de vie<br>
                                                • L’âme est attendue en enfer<br>
                                                • Obtient une résistance aux malédictions et sorts<br></div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout" style="border-bottom: 1px solid black;color: #00000036;">-50 ou moins</div>
                                            <div class="hero_tableau_effet" style="border-bottom: 1px solid black;color: #00000036;">• Les enfers te connaissent et les démons te recherchent<br>
                                                • En cas de mort, possibilité de revenir sous une autre forme (au choix du MJ)</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Aura neutre -3-->
                             <div class="niveau_aura_m3">
                                <div class="wrapper_zone_hero">
                                    <div class="habillage_tableau" style="margin-left: 25px;">
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                                Effet de l'aura :
                                            </div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout">-12 à 12</div>
                                            <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_7">-13 à -25</div>
                                            <div class="hero_tableau_effet_7">• Aura "néfaste"<br>
                                                • Impossible d’utiliser certains artefacts bénis (même en mode héroïque)<br>
                                                • Peut subir des dégâts supplémentaires sur les attaques bénies<br></div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout_4">-26 à -49</div>
                                            <div class="hero_tableau_effet_4">• Mort instantanée en arrivant à 0 points de vie<br>
                                                • L’âme est attendue en enfer<br>
                                                • Obtient une résistance aux malédictions et sorts<br></div>
                                        </div>
                                        <div class="wrapper_zone_hero">
                                            <div class="hero_tableau_cout" style="border-bottom: 1px solid black;">-50 ou moins</div>
                                            <div class="hero_tableau_effet" style="border-bottom: 1px solid black;">• Les enfers te connaissent et les démons te recherchent<br>
                                                • En cas de mort, possibilité de revenir sous une autre forme (au choix du MJ)</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                    </div> 
                </div>
            </div>

            <!-- CARACTÉRISTIQUES -->
            <input type="hidden" name="attr_carac_reduit" class="voir_carac" value="0">
            <div class="cadre_caracteristiques_reduit">
                <div class="wrapper_zone_personnage">
                    <div class="zone_caracteristiques_titre" style="padding-left: 40px;">CARACTÉRISTIQUES <button type="action" class="button_show" name="act_hide_carac" title="Afficher / Cacher" style="margin-right: 10px;"><span class="picto">|</span></button></div>
                </div>
            </div> 
            <div class="cadre_caracteristiques">
                <div class="wrapper_zone_personnage">
                    <div class="zone_caracteristiques_titre" style="padding-left: 40px;">CARACTÉRISTIQUES <button type="action" class="button_show" name="act_hide_carac" title="Afficher / Cacher" style="margin-right: 10px;"><span class="picto">|</span></button></div>
                </div>
                <div class="wrapper_zone_carac">
                    <div class="bloc_pentacle">
                        <div class="wrapper_zone_carac">
                            <div class="caracteristiques_pentacle"></div>
                            <div class="caracteristiques_force_data"><input type="number" class="input_carac" name="attr_force" value="15" min="15" max="99"></div>
                            <div class="caracteristiques_dexterite_data"><input type="number" class="input_carac" name="attr_dexterite" value="15" min="15" max="99"></div>
                            <div class="caracteristiques_constitution_data"><input type="number" class="input_carac" name="attr_constitution" value="15" min="15" max="99"></div>
                            <div class="caracteristiques_intelligence_data"><input type="number" class="input_carac" name="attr_intelligence" value="15" min="15" max="99"></div>
                            <div class="caracteristiques_charisme_data"><input type="number" class="input_carac" name="attr_charisme" value="15" min="15" max="99"></div>
                            <div class="caracteristiques_volonte_data"><input type="number" class="input_carac" name="attr_volonte" value="15" min="15" max="99"></div>
                            <div class="caracteristiques_force_titre"><button type="action" class="button_carac" name="act_roll-force" title="Votre puissance physique
    (frapper, porter, briser)">FORCE</button></div>
                            <div class="caracteristiques_dexterite_titre"><button type="action" class="button_carac" name="act_roll-dexterite" title="Votre agilité et précision 
    (esquive, tir, rapidité)">DEXTÉRITÉ</button></div>
                            <div class="caracteristiques_constitution_titre"><button type="action" class="button_carac" name="act_roll-constitution" title="Votre endurance et résistance physique
    (survivre, encaisser)">CONSTITUTION</button></div>
                            <div class="caracteristiques_intelligence_titre"><button type="action" class="button_carac" name="act_roll-intelligence" title="Votre savoir et capacité d’analyse
    (résoudre des énigmes, connaissances)">INTELLIGENCE</button></div>
                            <div class="caracteristiques_charisme_titre"><button type="action" class="button_carac" name="act_roll-charisme" title="Votre prestance et talent social
    (persuader, charmer)">CHARISME</button></div>
                            <div class="caracteristiques_volonte_titre"><button type="action" class="button_carac" name="act_roll-volonte" title=" Votre force mentale
    (résister à la peur, lancer des sorts)">VOLONTÉ</button></div>
                        </div>
                    </div>
                    <div class="caracteristiques_derivees">
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_titre">Points de vie</div>
                            <div class="derivees_data"><input type="number" class="input_derivees" name="attr_pdv" value="1" min="0" max="99"></div>
                            <div class="derivees_sur">sur</div>
                            <div class="derivees_max"><input type="number" class="input_derivees_lock" name="attr_pdv_maxi" value="0" readonly /></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_titre">Points de magie</div>
                            <div class="derivees_data"><input type="number" class="input_derivees" name="attr_pdm" value="1" min="0" max="99"></div>
                            <div class="derivees_sur">sur</div>
                            <div class="derivees_max"><input type="number" class="input_derivees_lock" name="attr_pdm_maxi" value="0" readonly /></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_titre"><button type="action" class="button_carac" name="act_roll-sm" style="font-size: 24px;font-family: 'Jim Nightshade';font-weight: normal;
                                " title="Jet de Santé mentale">Santé mentale</button></div>
                            <div class="derivees_data"><input type="number" class="input_derivees" name="attr_sm" value="1" min="0" max="99"></div>
                            <div class="derivees_sur">sur</div>
                            <div class="derivees_max"><input type="number" class="input_derivees_lock" name="attr_sm_maxi" value="0" readonly /></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_separateur"></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_titre">Bonus de Force</div>
                            <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_bonus_force" value="0" min="0" max="99"></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_titre">Bonus de Dextérité</div>
                            <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_bonus_dexterite" value="0" min="0" max="99"></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_titre">Encaissement</div>
                            <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_encaissement" value="0" min="0" max="99"></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_separateur"></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_titre">Malus de blessures</div>
                            <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_malus_blessure" value="0" min="0" max="99"></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_titre">Malus d'Esquive</div>
                            <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_malus_esquive_final" value="0" min="0" max="99"></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_titre">Bonus de Parade</div>
                            <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_bonus_parade_final" value="0" min="0" max="99"></div>
                        </div>
                        <div class="wrapper_zone_derivees">
                            <div class="derivees_separateur"></div>
                        </div><div class="wrapper_zone_derivees">
                            <div class="derivees_titre">Expérience</div>
                            <div class="derivees_bonus"><input type="number" class="input_derivees" name="attr_xp" value="0" min="0" max="99" style="width: 50% !important;"></div>
                        </div>
                    </div>
                    <div class="caracteristiques_separateur"></div>
                </div>  
            </div>
            <!-- COMPETENCES -->
            <input type="hidden" name="attr_competence_reduit" class="voir_competence" value="0">
            <div class="cadre_competence_reduit">
                <div class="wrapper_zone_personnage">
                    <div class="zone_competence_titre" style="padding-left: 50px;"><button type="action" class="button_show" name="act_hide_competence" title="Afficher / Cacher" style="margin-right: 10px;"><span class="picto">|</span></button> COMPÉTENCES</div>
                </div>
            </div> 
            <div class="cadre_competence">
                <div class="wrapper_zone_personnage">
                    <div class="zone_competence_titre" style="padding-left: 50px;"><button type="action" class="button_show" name="act_hide_competence" title="Afficher / Cacher" style="margin-right: 10px;"><span class="picto">|</span></button> COMPÉTENCES</div>
                </div>
                <div class="wrapper_zone_competence"> 
                    <div class="competence_gauche">
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_athletisme" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-athletisme-force">Athletisme (Force)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_athletisme_force" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-athletisme-dex">Athletisme (Dextérité)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_athletisme_dexterite" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_baratin" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-baratin-charisme">Baratin (Charisme)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_baratin_charisme" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-baratin-force">Baratin (Force)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_baratin_force" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_bibliotheque" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-bibliotheque">Bibliothèque (Intelligence)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_bibliotheque" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_chercher" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-chercher">Chercher (Intelligence)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_chercher" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_combat_cac" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-cac-dex">Combat CaC (Dextérité)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_combat_cac_dexterite" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-cac-force">Combat CaC (Force)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_combat_cac_force" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_combat_pugilat" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-pugilat">Combat Pugilat (Force)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_combat_pugilat" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_combat_distance" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-distance">Combat Distance (Dextérité)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_combat_distance" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_discretion" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-discretion">Discrétion (Dextérité)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_discretion" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_endurance" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-endurance">Endurance (Constitution)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_endurance" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_esquive" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-esquive">Esquive (Dextérité)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_esquive" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_langue" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-langue">Langue (Intelligence)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_langue" value="0" min="0" max="99" readonly /></div>
                        </div>
                    </div>
                    <div class="competence_droite">
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_langue_ancienne" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-ancienne-intel">Langue ancienne (Intelligence)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_langue_ancienne_intelligence" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-ancienne-volonte">Langue ancienne (Volonté)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_langue_ancienne_volonte" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_medecine" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-medecine">Médecine (Intelligence)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_medecine" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_metier" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-metier-intell">Métier (Intelligence)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_metier_intelligence" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-metier-volonte">Métier (Volonté)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_metier_volonte" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_perception" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-perception">Perception (Volonté)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_perception" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_psychologie" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-psychologie">Psychologie (Intelligence)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_psychologie" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_science" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-sciences">Sciences (Intelligence)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_science" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_sciences_occultes" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-sciences-occultes">Sciences occultes (Volonté)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_sciences_occultes" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_survie" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-survie">Survie (Intelligence)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_survie" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_vigilance" value="0" min="0" max="99"></div>
                            <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-vigilance">Vigilance (Dextérité)</button></div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_vigilance" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple" style="background: transparent;"><button type="action" class="button_comp" name="act_roll-custom1"><span class="D20">J</span></button></div>
                            <div class="competence_nom_double" style="padding-left: 4px;">
                                <select class="choix_custom" name="attr_custom_stat_1">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">Athlétisme</option>
                                    <option value="2">Baratin</option>
                                    <option value="3">Bibliothèque</option>
                                    <option value="4">Chercher</option>
                                    <option value="5">Combat CaC</option>
                                    <option value="6">Combat Pugilat</option>
                                    <option value="7">Combat Distance</option>
                                    <option value="8">Discrétion</option>
                                    <option value="9">Endurance</option>
                                    <option value="10">Esquive</option>
                                    <option value="11">Langue ancienne</option>
                                    <option value="12">Langue</option>
                                    <option value="13">Médecine</option>
                                    <option value="14">Métier</option>
                                    <option value="15">Perception</option>
                                    <option value="16">Psychologie</option>
                                    <option value="17">Sciences</option>
                                    <option value="18">Sciences occultes</option>
                                    <option value="19">Survie</option>
                                    <option value="20">Vigilance</option>
                                </select>

                                <select class="choix_custom" name="attr_custom_comp_1" style="width: 105px;">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">(Force)</option>
                                    <option value="2">(Dextérité)</option>
                                    <option value="3">(Constitution)</option>
                                    <option value="4">(Intelligence)</option>
                                    <option value="5">(Charisme)</option>
                                    <option value="6">(Volonté)</option>
                                </select>
                            </div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_custom_1" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple" style="background: transparent;"><button type="action" class="button_comp" name="act_roll-custom2"><span class="D20">J</span></button></div>
                            <div class="competence_nom_double" style="padding-left: 4px;">
                                <select class="choix_custom" name="attr_custom_stat_2">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">Athlétisme</option>
                                    <option value="2">Baratin</option>
                                    <option value="3">Bibliothèque</option>
                                    <option value="4">Chercher</option>
                                    <option value="5">Combat CaC</option>
                                    <option value="6">Combat Pugilat</option>
                                    <option value="7">Combat Distance</option>
                                    <option value="8">Discrétion</option>
                                    <option value="9">Endurance</option>
                                    <option value="10">Esquive</option>
                                    <option value="11">Langue ancienne</option>
                                    <option value="12">Langue</option>
                                    <option value="13">Médecine</option>
                                    <option value="14">Métier</option>
                                    <option value="15">Perception</option>
                                    <option value="16">Psychologie</option>
                                    <option value="17">Sciences</option>
                                    <option value="18">Sciences occultes</option>
                                    <option value="19">Survie</option>
                                    <option value="20">Vigilance</option>
                                </select>

                                <select class="choix_custom" name="attr_custom_comp_2" style="width: 105px;">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">(Force)</option>
                                    <option value="2">(Dextérité)</option>
                                    <option value="3">(Constitution)</option>
                                    <option value="4">(Intelligence)</option>
                                    <option value="5">(Charisme)</option>
                                    <option value="6">(Volonté)</option>
                                </select>
                            </div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_custom_2" value="0" min="0" max="99" readonly /></div>
                        </div>
                        <div class="wrapper_tableau_competence">
                            <div class="competence_valeur_simple" style="background: transparent;"><button type="action" class="button_comp" name="act_roll-custom3"><span class="D20">J</span></button></div>
                            <div class="competence_nom_double" style="padding-left: 4px;">
                                <select class="choix_custom" name="attr_custom_stat_3">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">Athlétisme</option>
                                    <option value="2">Baratin</option>
                                    <option value="3">Bibliothèque</option>
                                    <option value="4">Chercher</option>
                                    <option value="5">Combat CaC</option>
                                    <option value="6">Combat Pugilat</option>
                                    <option value="7">Combat Distance</option>
                                    <option value="8">Discrétion</option>
                                    <option value="9">Endurance</option>
                                    <option value="10">Esquive</option>
                                    <option value="11">Langue ancienne</option>
                                    <option value="12">Langue</option>
                                    <option value="13">Médecine</option>
                                    <option value="14">Métier</option>
                                    <option value="15">Perception</option>
                                    <option value="16">Psychologie</option>
                                    <option value="17">Sciences</option>
                                    <option value="18">Sciences occultes</option>
                                    <option value="19">Survie</option>
                                    <option value="20">Vigilance</option>
                                </select>

                                <select class="choix_custom" name="attr_custom_comp_3" style="width: 105px;">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">(Force)</option>
                                    <option value="2">(Dextérité)</option>
                                    <option value="3">(Constitution)</option>
                                    <option value="4">(Intelligence)</option>
                                    <option value="5">(Charisme)</option>
                                    <option value="6">(Volonté)</option>
                                </select>
                            </div>
                            <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_custom_3" value="0" min="0" max="99" readonly /></div>
                        </div>
                    </div> 
                    <div class="competence_crane"></div>
                    <div class="competence_separateur_centre"></div>
                    <div class="competence_separateur_bas"></div>       
                </div>
            </div>

            <!-- ARMEMENT / INVENTAIRE / COMBAT -->
            <input type="hidden" name="attr_armement_reduit" class="voir_armement" value="0">
            <div class="cadre_armement_reduit">
                <div class="wrapper_zone_personnage">
                    <div class="zone_armement_titre" style="padding-left: 40px;">ARMES ET ARMURES <button type="action" class="button_show" name="act_hide_armement" title="Afficher / Cacher"><span class="picto">|</span></button></div>
                </div>
            </div>
            <!-- DEBUT BLOC APRES TITRE --> 
            <div class="cadre_armement">
                <div class="wrapper_zone_personnage">
                    <div class="zone_armement_titre" style="padding-left: 40px;">ARMES ET ARMURES <button type="action" class="button_show" name="act_hide_armement" title="Afficher / Cacher"><span class="picto">|</span></button></div>
                </div>
                <div class="wrapper_zone_armement">
                    <div class="bloc_armes">
                        <div class="illustration_armes"></div>
                        <div class="wrapper_zone_armes_titre">
                            <div class="armes_type_titre">TYPE</div>
                            <div class="armes_nom_titre">NOM</div>
                            <div class="armes_degats_titre">DÉGÂTS</div>
                            <div class="armes_portee_titre">PORTÉE</div>
                            <div class="armes_effet_titre">EFFETS</div>
                            <div class="armes_roll_titre">JET DE DÉGÂTS</div>
                        </div>
                        <div class="wrapper_zone_armes">
                            <div class="armes_type">
                                <select class="choix_armes" name="attr_armes_nom_1">
                                    <option value="0"></option>
                                    <option value="10" selected="selected">Mains nues</option>
                                    <option value="1">Dague</option>
                                    <option value="2">Épée courte</option>
                                    <option value="3">Épée longue</option>
                                    <option value="4">Hache</option>
                                    <option value="5">Lance</option>
                                    <option value="6">Masse d'arme</option>
                                    <option value="7">Arc court</option>
                                    <option value="8">Arc long</option>
                                    <option value="9">Arbalète</option>
                                </select>
                            </div>
                            <div class="armes_nom">
                                <input name="attr_armes_designation_1" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>
                            <div class="armes_degats">
                                <input name="attr_armes_degats_1" type="text" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armes_portee">
                                <input name="attr_armes_portee_1" type="text" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armes_effet">
                                <input name="attr_armes_effet_1" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>
                            <div class="armes_prenotes"></div>
                            <div class="armes_notes">
                                <input name="attr_armes_notes_1" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                            </div>
                            <div class="armes_roll">
                                <button type="roll" class="button_comp" name="roll-degat_arme_1" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_1}}} {{result=[[@{armes_degats_1}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_1}}}"><span class="D20">J</span></button>
                            </div>
                        </div>
                        <div class="wrapper_zone_armes_separateur" style="grid-auto-rows: 1px;">     
                            <div class="separateur_armes"></div>
                        </div>
                        <div class="wrapper_zone_armes_separateur">     
                            <div class="separateur_armes_border"></div>
                        </div>
                        <div class="wrapper_zone_armes">
                            <div class="armes_type">
                                <select class="choix_armes" name="attr_armes_nom_2">
                                    <option value="0" selected="selected"></option>
                                    <option value="10">Mains nues</option>
                                    <option value="1">Dague</option>
                                    <option value="2">Épée courte</option>
                                    <option value="3">Épée longue</option>
                                    <option value="4">Hache</option>
                                    <option value="5">Lance</option>
                                    <option value="6">Masse d'arme</option>
                                    <option value="7">Arc court</option>
                                    <option value="8">Arc long</option>
                                    <option value="9">Arbalète</option>
                                </select>
                            </div>
                            <div class="armes_nom">
                                <input name="attr_armes_designation_2" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>
                            <div class="armes_degats">
                                <input name="attr_armes_degats_2" type="text" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armes_portee">
                                <input name="attr_armes_portee_2" type="text" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armes_effet">
                                <input name="attr_armes_effet_2" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>
                            <div class="armes_prenotes"></div>
                            <div class="armes_notes">
                                <input name="attr_armes_notes_2" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                            </div>
                            <div class="armes_roll">
                                <button type="roll" class="button_comp" name="roll-degat_arme_2" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_2}}} {{result=[[@{armes_degats_2}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_2}}}"><span class="D20">J</span></button>
                            </div>
                        </div>
                        <div class="wrapper_zone_armes_separateur" style="grid-auto-rows: 1px;">     
                            <div class="separateur_armes"></div>
                        </div>
                        <div class="wrapper_zone_armes_separateur">     
                            <div class="separateur_armes_border"></div>
                        </div>
                        <div class="wrapper_zone_armes">
                            <div class="armes_type">
                                <select class="choix_armes" name="attr_armes_nom_3">
                                    <option value="0" selected="selected"></option>
                                    <option value="10">Mains nues</option>
                                    <option value="1">Dague</option>
                                    <option value="2">Épée courte</option>
                                    <option value="3">Épée longue</option>
                                    <option value="4">Hache</option>
                                    <option value="5">Lance</option>
                                    <option value="6">Masse d'arme</option>
                                    <option value="7">Arc court</option>
                                    <option value="8">Arc long</option>
                                    <option value="9">Arbalète</option>
                                </select>
                            </div>
                            <div class="armes_nom">
                                <input name="attr_armes_designation_3" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>
                            <div class="armes_degats">
                                <input name="attr_armes_degats_3" type="text" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armes_portee">
                                <input name="attr_armes_portee_3" type="text" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armes_effet">
                                <input name="attr_armes_effet_3" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>
                            <div class="armes_prenotes"></div>
                            <div class="armes_notes">
                                <input name="attr_armes_notes_3" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                            </div>
                            <div class="armes_roll">
                                <button type="roll" class="button_comp" name="roll-degat_arme_3" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_3}}} {{result=[[@{armes_degats_3}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_3}}}"><span class="D20">J</span></button>
                            </div>
                        </div>
                        <div class="wrapper_zone_armes_separateur" style="grid-auto-rows: 1px;">     
                            <div class="separateur_armes"></div>
                        </div>
                        <div class="wrapper_zone_armes_separateur">     
                            <div class="separateur_armes_border"></div>
                        </div>
                        <div class="separateur_armes"></div>
                        <div class="wrapper_zone_armes">
                            <div class="armes_type">
                                <select class="choix_armes" name="attr_armes_nom_4">
                                    <option value="0" selected="selected"></option>
                                    <option value="10">Mains nues</option>
                                    <option value="1">Dague</option>
                                    <option value="2">Épée courte</option>
                                    <option value="3">Épée longue</option>
                                    <option value="4">Hache</option>
                                    <option value="5">Lance</option>
                                    <option value="6">Masse d'arme</option>
                                    <option value="7">Arc court</option>
                                    <option value="8">Arc long</option>
                                    <option value="9">Arbalète</option>
                                </select>
                            </div>
                            <div class="armes_nom">
                                <input name="attr_armes_designation_4" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>
                            <div class="armes_degats">
                                <input name="attr_armes_degats_4" type="text" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armes_portee">
                                <input name="attr_armes_portee_4" type="text" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armes_effet">
                                <input name="attr_armes_effet_4" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>
                            <div class="armes_prenotes"></div>
                            <div class="armes_notes">
                                <input name="attr_armes_notes_4" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                            </div>
                            <div class="armes_roll">
                                <button type="roll" class="button_comp" name="roll-degat_arme_4" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_4}}} {{result=[[@{armes_degats_4}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_4}}}"><span class="D20">J</span></button>
                            </div>
                        </div>
                        <div class="wrapper_zone_armes_separateur" style="grid-auto-rows: 1px;">     
                            <div class="separateur_armes"></div>
                        </div>
                        <div class="wrapper_zone_armes_separateur">     
                            <div class="separateur_armes_border_end"></div>
                        </div>
                    </div>
                    <div class="bloc_armures">
                        <div class="wrapper_bloc_armures">
                            <input type="hidden" name="attr_armure_affichee" class="choix_armure" value="0">
                            <div class="illustration_armures_plaque"></div>
                            <div class="illustration_armures_maille"></div>
                            <div class="illustration_armures_cuir"></div>
                            <div class="illustration_armures_vetement"></div>
                            <div class="illustration_armures_aucune"></div>
                            <div class="tableau_armures">
                                <div class="wrapper_zone_armures_titre" style="background: none;grid-auto-rows: 25px;margin-bottom: 10px;margin-left: -25px;margin-right: -11px;">
                                    <div class="armures_malus_titre" style="font-size: 11px;letter-spacing: 0px;">MALUS D'ARMURE</div>
                                </div>
                                <div class="wrapper_zone_armures_titre"style="margin-top: -14px;margin-left: -3px;padding-left: 3px;">
                                    <div class="armures_equipee_titre"></div>
                                    <div class="armures_type_titre">TYPE</div>
                                    <div class="armures_encaissement_titre" style="font-size: 10px;margin-left: -50px;">ENCAISSEMENT</div>
                                    <div class="armures_dexterite_titre">DEX</div>
                                    <div class="armures_athletisme_titre">ATHLE</div>
                                    <div class="armures_cac_titre">CAC</div>
                                    <div class="armures_pugilat_titre">PUGILAT</div>
                                    <div class="armures_distance_titre">DISTANCE</div>
                                    <div class="armures_discretion_titre">DISCRETION</div>
                                    <div class="armures_esquive_titre">ESQUIVE</div>
                                </div>
                                <div class="wrapper_zone_armures">
                                    <div class="armures_equipee" title="Cliquer pour équiper l'armure">
                                        <input type="checkbox" name="attr_armures_equipe_1" value="1" id="armure1">
                                        <label for="armure1"></label>
                                    </div>
                                    <div class="armures_type">
                                        <select class="choix_custom" name="attr_armures_nom_1">
                                            <option value="0" selected="selected"></option>
                                            <option value="1">Vêtements renforcés</option>
                                            <option value="2">Cuir bouilli</option>
                                            <option value="3">Armures de mailles</option>
                                            <option value="4">Armure de plaque</option>
                                        </select>
                                    </div>
                                    <div class="armures_encaissement">
                                        <input name="attr_armures_encaissement_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_dexterite">
                                        <input name="attr_armures_malus_dexterite_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_athletisme">
                                        <input name="attr_armures_malus_athletisme_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_cac">
                                        <input name="attr_armures_malus_combat_cac_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_pugilat">
                                        <input name="attr_armures_malus_combat_pugilat_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_distance">
                                        <input name="attr_armures_malus_combat_distance_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_discretion">
                                        <input name="attr_armures_malus_discretion_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_esquive">
                                        <input name="attr_armures_malus_esquive_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_prenotes"></div>
                                    <div class="armures_notes">
                                        <input name="attr_armures_notes_1" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                                    </div>
                                </div>
                                <div class="wrapper_zone_armures_separateur" style="grid-auto-rows: 1px;">     
                                    <div class="separateur_armures"></div>
                                </div>
                                <div class="wrapper_zone_armures_separateur">     
                                    <div class="separateur_armures_border"></div>
                                </div>
                                <div class="wrapper_zone_armures">
                                    <div class="armures_equipee" title="Cliquer pour équiper l'armure.">
                                        <input type="checkbox" name="attr_armures_equipe_2" value="1" id="armure2">
                                        <label for="armure2"></label>
                                    </div>
                                    <div class="armures_type">
                                        <select class="choix_custom" name="attr_armures_nom_2">
                                            <option value="0" selected="selected"></option>
                                            <option value="1">Vêtements renforcés</option>
                                            <option value="2">Cuir bouilli</option>
                                            <option value="3">Armures de mailles</option>
                                            <option value="4">Armure de plaque</option>
                                        </select>
                                    </div>
                                    <div class="armures_encaissement">
                                        <input name="attr_armures_encaissement_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_dexterite">
                                        <input name="attr_armures_malus_dexterite_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_athletisme">
                                        <input name="attr_armures_malus_athletisme_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_cac">
                                        <input name="attr_armures_malus_combat_cac_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_pugilat">
                                        <input name="attr_armures_malus_combat_pugilat_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_distance">
                                        <input name="attr_armures_malus_combat_distance_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_discretion">
                                        <input name="attr_armures_malus_discretion_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_esquive">
                                        <input name="attr_armures_malus_esquive_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_prenotes"></div>
                                    <div class="armures_notes">
                                        <input name="attr_armures_notes_2" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                                    </div>
                                </div>
                                <div class="wrapper_zone_armures_separateur" style="grid-auto-rows: 1px;">     
                                    <div class="separateur_armures"></div>
                                </div>
                                <div class="wrapper_zone_armures_separateur">     
                                    <div class="separateur_armures_border"></div>
                                </div>
                                <div class="wrapper_zone_armures">
                                    <div class="armures_equipee" title="Cliquer pour équiper l'armure">
                                        <input type="checkbox" name="attr_armures_equipe_3" value="1" id="armure3">
                                        <label for="armure3"></label>
                                    </div>
                                    <div class="armures_type">
                                        <select class="choix_custom" name="attr_armures_nom_3">
                                            <option value="0" selected="selected"></option>
                                            <option value="1">Vêtements renforcés</option>
                                            <option value="2">Cuir bouilli</option>
                                            <option value="3">Armures de mailles</option>
                                            <option value="4">Armure de plaque</option>
                                        </select>
                                    </div>
                                    <div class="armures_encaissement">
                                        <input name="attr_armures_encaissement_3" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_dexterite">
                                        <input name="attr_armures_malus_dexterite_3" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_athletisme">
                                        <input name="attr_armures_malus_athletisme_3" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_cac">
                                        <input name="attr_armures_malus_combat_cac_3" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_pugilat">
                                        <input name="attr_armures_malus_combat_pugilat_3" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_distance">
                                        <input name="attr_armures_malus_combat_distance_3" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_discretion">
                                        <input name="attr_armures_malus_discretion_3" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_esquive">
                                        <input name="attr_armures_malus_esquive_3" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="armures_prenotes"></div>
                                    <div class="armures_notes">
                                        <input name="attr_armures_notes_3" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                                    </div>
                                    <div class="separateur_armures_border_end"></div>
                                </div>
                            </div>                            
                        </div>   
                        <!-- BLOC bouclier -->
                        <div class="wrapper_bloc_boucliers" style="margin-top: 45px;">
                            
                            <input type="hidden" name="attr_bouclier_affichee" class="choix_bouclier" value="0">
                            <div class="illustration_pavois"></div>
                            <div class="illustration_bouclier_rond"></div>
                            <div class="illustration_bouclier_aucun"></div>
                            <!-- Tableau bouclier -->
                            <div class="tableau_boucliers">
                                <div class="wrapper_zone_boucliers_titre" style="grid-auto-rows: 34px;line-height: 12px;margin-top: -14px;margin-left: -3px;padding-left: 3px;">
                                    <div class="boucliers_equipee">
                                    </div>
                                    <div class="boucliers_type_titre">TYPE</div>
                                    <div class="boucliers_parade_titre">BONUS PARADE</div>
                                    <div class="boucliers_esquive_titre">MALUS ESQUIVE</div>
                                    <div class="boucliers_notes_titre">NOTES</div>
                                </div>
                                <div class="wrapper_zone_boucliers" style="grid-auto-rows: 35px;">
                                    <div class="boucliers_equipee">
                                        <input type="checkbox" name="attr_boucliers_equipe_1" value="1" id="bouclier1">
                                        <label for="bouclier1"></label>
                                    </div>
                                    <div class="boucliers_type">
                                        <select class="choix_boucliers" name="attr_boucliers_nom_1">
                                            <option value="0" selected="selected"></option>
                                            <option value="1">Bouclier rond</option>
                                            <option value="2">Pavois</option>
                                        </select>
                                    </div>
                                    <div class="boucliers_parade">
                                        <input name="attr_boucliers_bonus_parade_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="boucliers_esquive">
                                        <input name="attr_boucliers_malus_esquive_1" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="boucliers_notes">
                                        <input name="attr_boucliers_notes_1" type="text" spellcheck="false" class="input_dotted_gauche">
                                    </div>
                                </div>
                                <div class="wrapper_zone_boucliers_separateur" style="grid-auto-rows: 1px;">     
                                    <div class="separateur_boucliers"></div>
                                </div>
                                <div class="wrapper_zone_boucliers_separateur">     
                                    <div class="separateur_boucliers_border"></div>
                                </div>
                                <div class="wrapper_zone_boucliers">
                                    <div class="boucliers_equipee">
                                        <input type="checkbox" name="attr_boucliers_equipe_2" value="1" id="bouclier2">
                                        <label for="bouclier2"></label>
                                    </div>
                                    <div class="boucliers_type">
                                        <select class="choix_boucliers" name="attr_boucliers_nom_2">
                                            <option value="0" selected="selected"></option>
                                            <option value="1">Bouclier rond</option>
                                            <option value="2">Pavois</option>
                                        </select>
                                    </div>
                                    <div class="boucliers_parade">
                                        <input name="attr_boucliers_bonus_parade_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="boucliers_esquive">
                                        <input name="attr_boucliers_malus_esquive_2" type="number" spellcheck="false" class="input_dotted_centre">
                                    </div>
                                    <div class="boucliers_notes">
                                        <input name="attr_boucliers_notes_2" type="text" spellcheck="false" class="input_dotted_gauche">
                                    </div>                                    
                                    <div class="separateur_boucliers_border_end"></div>
                                </div>                                
                            </div>
                        </div>  
                    </div>
                </div>
            </div>  
            <!-- INVENTAIRE -->
            <input type="hidden" name="attr_inventaire_reduit" class="voir_inventaire" value="0">
            <div class="cadre_inventaire_reduit">
                <div class="wrapper_zone_personnage">
                    <div class="zone_inventaire_titre"><button type="action" class="button_show" name="act_hide_inventaire" title="Afficher / Cacher" style="margin-right: 10px;"><span class="picto">|</span></button> INVENTAIRE</div>
                </div>
            </div>
            <div class="cadre_inventaire">
                <div class="wrapper_zone_personnage">
                    <div class="zone_inventaire_titre"><button type="action" class="button_show" name="act_hide_inventaire" title="Afficher / Cacher" style="margin-right: 10px;"><span class="picto">|</span></button> INVENTAIRE</div>
                </div>
                <div class="wrapper_bloc_inventaire">
                    <div class="texte_sac"><textarea class="sac" spellcheck="false" name="attr_inventaire"></textarea></div>
                    <div class="illustration_sac"></div>
                    <div class="illustration_bourse"><input type="number" class="input_comp" name="attr_bourse" value="0" min="0" style="background: #fdfdfdbf;width: 50px !important;height: 50px !important;border: 1px solid black;font-family: 'Jim Nightshade';font-size: 18px;background-image: url(https://raw.githubusercontent.com/ctotone/JdR/refs/heads/main/Obscuritas/images/cercle_carac.webp);background-size: 49px 49px;background-repeat: no-repeat;"></div>
                </div>
            </div>   
        </div> 
    </div>
</div>

<div class="page_aura">
    <div class="cadre_hero" style="display:block;">
        <div class="wrapper_zone_personnage">
            <div class="zone_hero_titre" style="padding-left: 40px;"> HÉROÏSME et HÉRÉSIE</div>
            <!-- Info -->
            <!-- <div class="zone_hero_info">Ce cadre vous permet de mettre à jour vos scores d'Hérésie et d'Héroisme (L'Aura étant elle, automatiquement mise à jour).<br>Chaque palier d'Aura qui aura était atteint fera apparaitre les bonus qui en découlent.</div> -->
            <div class="zone_hero_here_aura_hero">
                <div class="wrapper_zone_hero_here_aura_hero">
                    <!-- Titre -->
                    <div class="hero_titre_heresie">HÉRÉSIE</div>
                    <div class="hero_heresie_data">
                        <button type="action" class="button_here_hero" name="act_heresie_moins" title="Retirer 1 point d'hérésie" style="background: #651d17;"><span class="picto">_</span></button>
                        <input type="number" class="input_hero_here" name="attr_heresie" value="0" style="background: #651d17;" readonly>
                        <button type="action" class="button_here_hero" name="act_heresie_plus"  title="Ajouter 1 point d'hérésie" style="background: #651d17;"><span class="picto">&</span></button></div>
                    <div class="hero_titre_aura">AURA</div>
                    <div class="hero_aura_data_habillage">
                        <input type="number" class="input_hero_here" name="attr_aura" value="0" style="border: none;font-size: 26px;">
                    </div>
                    <div class="hero_titre_heroisme">HÉROÏSME</div>
                    <div class="hero_heroisme_data">
                        <button type="action" class="button_here_hero" name="act_heroisme_moins" title="Retirer 1 point d'héroïsme" style="background: #6875a7;"><span class="picto">_</span></button>
                        <input type="number" class="input_hero_here" name="attr_heroisme" value="0" style="background: #6875a7;" readonly>
                        <button type="action" class="button_here_hero" name="act_heroisme_plus" title="Retirer 1 point d'héroïsme" style="background: #6875a7;"><span class="picto">&</span></button>
                    </div>
                </div>
            </div>
            <!-- Gauche -->
            <div class="zone_hero_gauche">
                <div class="wrapper_zone_hero">
                    <div class="habillage_tableau" style="
                    margin-right: 25px;
                ">
                        <div class="wrapper_zone_hero">
                            <div class="hero_aura_titre_effet" style="
                            font-size: 11px;
                            background: black;
                            border: 1px solid black;
                            border-radius: 5px 5px 0px 0px;
                            color: var(--white);
                        ">
                                Utilisation des Points d’Hérésie :
                            </div>
                        </div>
                        <div class="wrapper_zone_hero">
                            <div class="hero_tableau_cout">1 point</div>
                            <div class="hero_tableau_effet">• Malus de 20 sur un jet crucial<br>
                                • Le personnage subit les dégâts maximum lors d’une attaque</div>
                        </div>
                        <div class="wrapper_zone_hero">
                            <div class="hero_tableau_cout_4">2 Points</div>
                            <div class="hero_tableau_effet_4">• Le joueur doit relancer un jet réussi<br>
                                • Ajoute un effet de peur ou une vision macabre dans la scène</div>
                        </div>
                        <div class="wrapper_zone_hero">
                            <div class="hero_tableau_cout">3 Points</div>
                            <div class="hero_tableau_effet">• Perte de 20 points de santé mentale<br>
                                • Bloque la magie du personnage pour la durée de la scène</div>
                        </div>
                        <div class="wrapper_zone_hero">
                            <div class="hero_tableau_cout" style="border-bottom: 1px solid black;">7 Points</div>
                            <div class="hero_tableau_effet" style="border-bottom: 1px solid black;font-weight: bold;font-size: 13px;text-align: center !important;">La possession des ténèbres</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Droite -->
            <div class="zone_hero_droite">
                <div class="wrapper_zone_hero">
                    <div class="habillage_tableau" style="
                    margin-left: 25px;
                ">
                        <div class="wrapper_zone_hero">
                            <div class="hero_aura_titre_effet" style="
                            font-size: 11px;
                            background: black;
                            border: 1px solid black;
                            border-radius: 5px 5px 0px 0px;
                            color: var(--white);
                        ">
                                Utilisation des Points d’Héroïsme :
                            </div>
                        </div>
                        <div class="wrapper_zone_hero">
                            <div class="hero_tableau_cout">1 point</div>
                            <div class="hero_tableau_effet">• Bonus de +20 sur un jet<br>
                                • Dégâts maximum sur une attaque</div>
                        </div>
                        <div class="wrapper_zone_hero">
                            <div class="hero_tableau_cout_4">2 Points</div>
                            <div class="hero_tableau_effet_4">• Relancer un jet échoué<br>
                                • Résister à un effet de peur ou d’influence<br>
                                • Lancer gratuitement un sort moyen ou faible</div>
                        </div>
                        <div class="wrapper_zone_hero">
                            <div class="hero_tableau_cout">3 Points</div>
                            <div class="hero_tableau_effet">• Récupérer 20 points de santé mentale<br>
                                • Lancer gratuitement un sort puissant</div>
                        </div>
                        <div class="wrapper_zone_hero">
                            <div class="hero_tableau_cout" style="border-bottom: 1px solid black;">7 Points</div>
                            <div class="hero_tableau_effet" style="border-bottom: 1px solid black;font-weight: bold;font-size: 13px;">Révèle le héros en toi !</div>
                        </div>
                    </div>
                </div>    
            </div> 
            <!-- Aura centre -->
            <div class="zone_hero_aura">
                <div class="wrapper_zone_hero">
                    <!-- Affichage dynamique tableau des effets aura -->
                    <input type="hidden" name="attr_valeur_aura" class="valeur_aura" value="0">
                    <!-- Aura neutre -->
                     <div class="niveau_aura_0">
                        <div class="wrapper_zone_hero">
                            <div class="habillage_tableau" style="margin-left: 25px;">
                                <div class="wrapper_zone_hero">
                                    <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                        Effet de l'aura :
                                    </div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout" style="color: #00000036;">13 à 25</div>
                                    <div class="hero_tableau_effet" style="color: #00000036;">• Aura "bonne"<br>
                                        • Permet d’utiliser certains artefacts bénis</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">-12 à 12</div>
                                    <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_7" style="border-bottom: 1px solid black;color: #00000036;">-13 à -25</div>
                                    <div class="hero_tableau_effet_7" style="border-bottom: 1px solid black;color: #00000036;">• Aura "néfaste"<br>
                                        • Impossible d’utiliser certains artefacts bénis (même en mode héroïque)<br>
                                        • Peut subir des dégâts supplémentaires sur les attaques bénies<br></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Aura +1 -->
                     <div class="niveau_aura_1">
                        <div class="wrapper_zone_hero">
                            <div class="habillage_tableau" style="margin-left: 25px;">
                                <div class="wrapper_zone_hero">
                                    <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                        Effet de l'aura :
                                    </div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">-12 à 12</div>
                                    <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">13 à 25</div>
                                    <div class="hero_tableau_effet">• Aura "bonne"<br>
                                        • Permet d’utiliser certains artefacts bénis</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout" style="color: #00000036;">26 à 49</div>
                                    <div class="hero_tableau_effet" style="color: #00000036;">• Le personnage est automatiquement stabilisé en arrivant à 0 points de vie</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_4" style="border-bottom: 1px solid black;color: #00000036;">50 ou plus</div>
                                    <div class="hero_tableau_effet_4" style="border-bottom: 1px solid black;color: #00000036;">• Le paradis te connaît et te favorise<br>
                                        • Certains avantages arrivent spontanément en cas de besoin<br>
                                        • Chance de résurrection en cas de mort</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Aura +2 -->
                     <div class="niveau_aura_2">
                        <div class="wrapper_zone_hero">
                            <div class="habillage_tableau" style="margin-left: 25px;">
                                <div class="wrapper_zone_hero">
                                    <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                        Effet de l'aura :
                                    </div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">-12 à 12</div>
                                    <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">13 à 25</div>
                                    <div class="hero_tableau_effet">• Aura "bonne"<br>
                                        • Permet d’utiliser certains artefacts bénis</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">26 à 49</div>
                                    <div class="hero_tableau_effet">• Le personnage est automatiquement stabilisé en arrivant à 0 points de vie</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_4" style="border-bottom: 1px solid black;color: #00000036;">50 ou plus</div>
                                    <div class="hero_tableau_effet_4" style="border-bottom: 1px solid black;color: #00000036;">• Le paradis te connaît et te favorise<br>
                                        • Certains avantages arrivent spontanément en cas de besoin<br>
                                        • Chance de résurrection en cas de mort</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Aura +3-->
                     <div class="niveau_aura_3">
                        <div class="wrapper_zone_hero">
                            <div class="habillage_tableau" style="margin-left: 25px;">
                                <div class="wrapper_zone_hero">
                                    <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                        Effet de l'aura :
                                    </div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">-12 à 12</div>
                                    <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">13 à 25</div>
                                    <div class="hero_tableau_effet">• Aura "bonne"<br>
                                        • Permet d’utiliser certains artefacts bénis</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">26 à 49</div>
                                    <div class="hero_tableau_effet">• Le personnage est automatiquement stabilisé en arrivant à 0 points de vie</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_4" style="border-bottom: 1px solid black">50 ou plus</div>
                                    <div class="hero_tableau_effet_4" style="border-bottom: 1px solid black;">• Le paradis te connaît et te favorise<br>
                                        • Certains avantages arrivent spontanément en cas de besoin<br>
                                        • Chance de résurrection en cas de mort</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Aura -1 -->
                     <div class="niveau_aura_m1">
                        <div class="wrapper_zone_hero">
                            <div class="habillage_tableau" style="margin-left: 25px;">
                                <div class="wrapper_zone_hero">
                                    <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                        Effet de l'aura :
                                    </div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">-12 à 12</div>
                                    <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_7">-13 à -25</div>
                                    <div class="hero_tableau_effet_7">• Aura "néfaste"<br>
                                        • Impossible d’utiliser certains artefacts bénis (même en mode héroïque)<br>
                                        • Peut subir des dégâts supplémentaires sur les attaques bénies<br></div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_4" style="color: #00000036;">-26 à -49</div>
                                    <div class="hero_tableau_effet_4" style="color: #00000036;">• Mort instantanée en arrivant à 0 points de vie<br>
                                        • L’âme est attendue en enfer<br>
                                        • Obtient une résistance aux malédictions et sorts<br></div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout" style="border-bottom: 1px solid black;color: #00000036;">-50 ou moins</div>
                                    <div class="hero_tableau_effet" style="border-bottom: 1px solid black;color: #00000036;">• Les enfers te connaissent et les démons te recherchent<br>
                                        • En cas de mort, possibilité de revenir sous une autre forme (au choix du MJ)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Aura -2 -->
                     <div class="niveau_aura_m2">
                        <div class="wrapper_zone_hero">
                            <div class="habillage_tableau" style="margin-left: 25px;">
                                <div class="wrapper_zone_hero">
                                    <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                        Effet de l'aura :
                                    </div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">-12 à 12</div>
                                    <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_7">-13 à -25</div>
                                    <div class="hero_tableau_effet_7">• Aura "néfaste"<br>
                                        • Impossible d’utiliser certains artefacts bénis (même en mode héroïque)<br>
                                        • Peut subir des dégâts supplémentaires sur les attaques bénies<br></div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_4">-26 à -49</div>
                                    <div class="hero_tableau_effet_4">• Mort instantanée en arrivant à 0 points de vie<br>
                                        • L’âme est attendue en enfer<br>
                                        • Obtient une résistance aux malédictions et sorts<br></div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout" style="border-bottom: 1px solid black;color: #00000036;">-50 ou moins</div>
                                    <div class="hero_tableau_effet" style="border-bottom: 1px solid black;color: #00000036;">• Les enfers te connaissent et les démons te recherchent<br>
                                        • En cas de mort, possibilité de revenir sous une autre forme (au choix du MJ)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Aura neutre -3-->
                     <div class="niveau_aura_m3">
                        <div class="wrapper_zone_hero">
                            <div class="habillage_tableau" style="margin-left: 25px;">
                                <div class="wrapper_zone_hero">
                                    <div class="hero_aura_titre_effet" style="font-size: 11px;background: black;border: 1px solid black;border-radius: 5px 5px 0px 0px;color: var(--white);">
                                        Effet de l'aura :
                                    </div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout">-12 à 12</div>
                                    <div class="hero_tableau_effet">• Aucun effet particulier</div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_7">-13 à -25</div>
                                    <div class="hero_tableau_effet_7">• Aura "néfaste"<br>
                                        • Impossible d’utiliser certains artefacts bénis (même en mode héroïque)<br>
                                        • Peut subir des dégâts supplémentaires sur les attaques bénies<br></div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout_4">-26 à -49</div>
                                    <div class="hero_tableau_effet_4">• Mort instantanée en arrivant à 0 points de vie<br>
                                        • L’âme est attendue en enfer<br>
                                        • Obtient une résistance aux malédictions et sorts<br></div>
                                </div>
                                <div class="wrapper_zone_hero">
                                    <div class="hero_tableau_cout" style="border-bottom: 1px solid black;">-50 ou moins</div>
                                    <div class="hero_tableau_effet" style="border-bottom: 1px solid black;">• Les enfers te connaissent et les démons te recherchent<br>
                                        • En cas de mort, possibilité de revenir sous une autre forme (au choix du MJ)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
            </div> 
        </div>
    </div>
</div>

<div class="page_caracteristiques">
    <div class="wrapper_page_1">
        <div class="cadre_caracteristiques" style="display: block;">
            <div class="wrapper_zone_personnage">
                <div class="zone_caracteristiques_titre" style="padding-left: 55px;">CARACTÉRISTIQUES</div>
            </div>
            <div class="wrapper_zone_carac">
                <div class="bloc_pentacle">
                    <div class="wrapper_zone_carac">
                        <div class="caracteristiques_pentacle"></div>
                        <div class="caracteristiques_force_data"><input type="number" class="input_carac" name="attr_force" value="15" min="15" max="99"></div>
                        <div class="caracteristiques_dexterite_data"><input type="number" class="input_carac" name="attr_dexterite" value="15" min="15" max="99"></div>
                        <div class="caracteristiques_constitution_data"><input type="number" class="input_carac" name="attr_constitution" value="15" min="15" max="99"></div>
                        <div class="caracteristiques_intelligence_data"><input type="number" class="input_carac" name="attr_intelligence" value="15" min="15" max="99"></div>
                        <div class="caracteristiques_charisme_data"><input type="number" class="input_carac" name="attr_charisme" value="15" min="15" max="99"></div>
                        <div class="caracteristiques_volonte_data"><input type="number" class="input_carac" name="attr_volonte" value="15" min="15" max="99"></div>
                        <div class="caracteristiques_force_titre"><button type="action" class="button_carac" name="act_roll-force" title="Votre puissance physique
(frapper, porter, briser)">FORCE</button></div>
                        <div class="caracteristiques_dexterite_titre"><button type="action" class="button_carac" name="act_roll-dexterite" title="Votre agilité et précision 
(esquive, tir, rapidité)">DEXTÉRITÉ</button></div>
                        <div class="caracteristiques_constitution_titre"><button type="action" class="button_carac" name="act_roll-constitution" title="Votre endurance et résistance physique
(survivre, encaisser)">CONSTITUTION</button></div>
                        <div class="caracteristiques_intelligence_titre"><button type="action" class="button_carac" name="act_roll-intelligence" title="Votre savoir et capacité d’analyse
(résoudre des énigmes, connaissances)">INTELLIGENCE</button></div>
                        <div class="caracteristiques_charisme_titre"><button type="action" class="button_carac" name="act_roll-charisme" title="Votre prestance et talent social
(persuader, charmer)">CHARISME</button></div>
                        <div class="caracteristiques_volonte_titre"><button type="action" class="button_carac" name="act_roll-volonte" title=" Votre force mentale
(résister à la peur, lancer des sorts)">VOLONTÉ</button></div>
                    </div>
                </div>
                <div class="caracteristiques_derivees">
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_titre">Points de vie</div>
                        <div class="derivees_data"><input type="number" class="input_derivees" name="attr_pdv" value="1" min="0" max="99"></div>
                        <div class="derivees_sur">sur</div>
                        <div class="derivees_max"><input type="number" class="input_derivees_lock" name="attr_pdv_maxi" value="0" readonly /></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_titre">Points de magie</div>
                        <div class="derivees_data"><input type="number" class="input_derivees" name="attr_pdm" value="1" min="0" max="99"></div>
                        <div class="derivees_sur">sur</div>
                        <div class="derivees_max"><input type="number" class="input_derivees_lock" name="attr_pdm_maxi" value="0" readonly /></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_titre"><button type="action" class="button_carac" name="act_roll-sm" style="font-size: 24px;font-family: 'Jim Nightshade';font-weight: normal;
                            " title="Jet de Santé mentale">Santé mentale</button></div>
                        <div class="derivees_data"><input type="number" class="input_derivees" name="attr_sm" value="1" min="0" max="99"></div>
                        <div class="derivees_sur">sur</div>
                        <div class="derivees_max"><input type="number" class="input_derivees_lock" name="attr_sm_maxi" value="0" readonly /></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_separateur"></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_titre">Bonus de Force</div>
                        <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_bonus_force" value="0" min="0" max="99"></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_titre">Bonus de Dextérité</div>
                        <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_bonus_dexterite" value="0" min="0" max="99"></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_titre">Encaissement</div>
                        <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_encaissement" value="0" min="0" max="99"></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_separateur"></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_titre">Malus de blessures</div>
                        <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_malus_blessure" value="0" min="0" max="99"></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_titre">Malus d'Esquive</div>
                        <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_malus_esquive_final" value="0" min="0" max="99"></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_titre">Bonus de Parade</div>
                        <div class="derivees_bonus"><input type="number" class="input_derivees_lock" name="attr_bonus_parade_final" value="0" min="0" max="99"></div>
                    </div>
                    <div class="wrapper_zone_derivees">
                        <div class="derivees_separateur"></div>
                    </div><div class="wrapper_zone_derivees">
                        <div class="derivees_titre">Expérience</div>
                        <div class="derivees_bonus"><input type="number" class="input_derivees" name="attr_xp" value="0" min="0" max="99" style="width: 50% !important;"></div>
                    </div>
                </div>
                <div class="caracteristiques_separateur"></div>
            </div>  
        </div>
    </div>
</div>

<div class="page_competences">
    <div class="cadre_competence" style="display: block;">
        <div class="wrapper_zone_personnage">
            <div class="zone_competence_titre" style="padding-left: 75px;">COMPÉTENCES</div>
        </div>
        <div class="wrapper_zone_competence"> 
            <div class="competence_gauche">
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_athletisme" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-athletisme-force">Athletisme (Force)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_athletisme_force" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-athletisme-dex">Athletisme (Dextérité)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_athletisme_dexterite" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_baratin" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-baratin-charisme">Baratin (Charisme)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_baratin_charisme" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-baratin-force">Baratin (Force)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_baratin_force" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_bibliotheque" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-bibliotheque">Bibliothèque (Intelligence)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_bibliotheque" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_chercher" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-chercher">Chercher (Intelligence)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_chercher" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_combat_cac" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-cac-dex">Combat CaC (Dextérité)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_combat_cac_dexterite" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-cac-force">Combat CaC (Force)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_combat_cac_force" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_combat_pugilat" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-pugilat">Combat Pugilat (Force)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_combat_pugilat" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_combat_distance" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-distance">Combat Distance (Dextérité)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_combat_distance" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_discretion" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-discretion">Discrétion (Dextérité)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_discretion" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_endurance" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-endurance">Endurance (Constitution)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_endurance" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_esquive" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-esquive">Esquive (Dextérité)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_esquive" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_langue" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-langue">Langue (Intelligence)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_langue" value="0" min="0" max="99" readonly /></div>
                </div>
            </div>
            <div class="competence_droite">
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_langue_ancienne" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-ancienne-intel">Langue ancienne (Intelligence)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_langue_ancienne_intelligence" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-ancienne-volonte">Langue ancienne (Volonté)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_langue_ancienne_volonte" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_medecine" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-medecine">Médecine (Intelligence)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_medecine" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_double"><input type="number" class="input_comp_double" name="attr_stat_metier" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-metier-intell">Métier (Intelligence)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_metier_intelligence" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-metier-volonte">Métier (Volonté)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_metier_volonte" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_perception" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-perception">Perception (Volonté)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_perception" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_psychologie" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-psychologie">Psychologie (Intelligence)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_psychologie" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_science" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-sciences">Sciences (Intelligence)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_science" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_sciences_occultes" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-sciences-occultes">Sciences occultes (Volonté)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_sciences_occultes" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_survie" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-survie">Survie (Intelligence)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_survie" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple"><input type="number" class="input_comp" name="attr_stat_vigilance" value="0" min="0" max="99"></div>
                    <div class="competence_nom_double"><button type="action" class="button_comp" name="act_roll-vigilance">Vigilance (Dextérité)</button></div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_vigilance" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple" style="background: transparent;"><button type="action" class="button_comp" name="act_roll-custom1"><span class="D20">J</span></button></div>
                    <div class="competence_nom_double" style="padding-left: 4px;">
                        <select class="choix_custom" name="attr_custom_stat_1">
                            <option value="0" selected="selected"></option>
                            <option value="1">Athlétisme</option>
                            <option value="2">Baratin</option>
                            <option value="3">Bibliothèque</option>
                            <option value="4">Chercher</option>
                            <option value="5">Combat CaC</option>
                            <option value="6">Combat Pugilat</option>
                            <option value="7">Combat Distance</option>
                            <option value="8">Discrétion</option>
                            <option value="9">Endurance</option>
                            <option value="10">Esquive</option>
                            <option value="11">Langue ancienne</option>
                            <option value="12">Langue</option>
                            <option value="13">Médecine</option>
                            <option value="14">Métier</option>
                            <option value="15">Perception</option>
                            <option value="16">Psychologie</option>
                            <option value="17">Sciences</option>
                            <option value="18">Sciences occultes</option>
                            <option value="19">Survie</option>
                            <option value="20">Vigilance</option>
                        </select>

                        <select class="choix_custom" name="attr_custom_comp_1" style="width: 105px;">
                            <option value="0" selected="selected"></option>
                            <option value="1">(Force)</option>
                            <option value="2">(Dextérité)</option>
                            <option value="3">(Constitution)</option>
                            <option value="4">(Intelligence)</option>
                            <option value="5">(Charisme)</option>
                            <option value="6">(Volonté)</option>
                        </select>
                    </div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_custom_1" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple" style="background: transparent;"><button type="action" class="button_comp" name="act_roll-custom2"><span class="D20">J</span></button></div>
                    <div class="competence_nom_double" style="padding-left: 4px;">
                        <select class="choix_custom" name="attr_custom_stat_2">
                            <option value="0" selected="selected"></option>
                            <option value="1">Athlétisme</option>
                            <option value="2">Baratin</option>
                            <option value="3">Bibliothèque</option>
                            <option value="4">Chercher</option>
                            <option value="5">Combat CaC</option>
                            <option value="6">Combat Pugilat</option>
                            <option value="7">Combat Distance</option>
                            <option value="8">Discrétion</option>
                            <option value="9">Endurance</option>
                            <option value="10">Esquive</option>
                            <option value="11">Langue ancienne</option>
                            <option value="12">Langue</option>
                            <option value="13">Médecine</option>
                            <option value="14">Métier</option>
                            <option value="15">Perception</option>
                            <option value="16">Psychologie</option>
                            <option value="17">Sciences</option>
                            <option value="18">Sciences occultes</option>
                            <option value="19">Survie</option>
                            <option value="20">Vigilance</option>
                        </select>

                        <select class="choix_custom" name="attr_custom_comp_2" style="width: 105px;">
                            <option value="0" selected="selected"></option>
                            <option value="1">(Force)</option>
                            <option value="2">(Dextérité)</option>
                            <option value="3">(Constitution)</option>
                            <option value="4">(Intelligence)</option>
                            <option value="5">(Charisme)</option>
                            <option value="6">(Volonté)</option>
                        </select>
                    </div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_custom_2" value="0" min="0" max="99" readonly /></div>
                </div>
                <div class="wrapper_tableau_competence">
                    <div class="competence_valeur_simple" style="background: transparent;"><button type="action" class="button_comp" name="act_roll-custom3"><span class="D20">J</span></button></div>
                    <div class="competence_nom_double" style="padding-left: 4px;">
                        <select class="choix_custom" name="attr_custom_stat_3">
                            <option value="0" selected="selected"></option>
                            <option value="1">Athlétisme</option>
                            <option value="2">Baratin</option>
                            <option value="3">Bibliothèque</option>
                            <option value="4">Chercher</option>
                            <option value="5">Combat CaC</option>
                            <option value="6">Combat Pugilat</option>
                            <option value="7">Combat Distance</option>
                            <option value="8">Discrétion</option>
                            <option value="9">Endurance</option>
                            <option value="10">Esquive</option>
                            <option value="11">Langue ancienne</option>
                            <option value="12">Langue</option>
                            <option value="13">Médecine</option>
                            <option value="14">Métier</option>
                            <option value="15">Perception</option>
                            <option value="16">Psychologie</option>
                            <option value="17">Sciences</option>
                            <option value="18">Sciences occultes</option>
                            <option value="19">Survie</option>
                            <option value="20">Vigilance</option>
                        </select>

                        <select class="choix_custom" name="attr_custom_comp_3" style="width: 105px;">
                            <option value="0" selected="selected"></option>
                            <option value="1">(Force)</option>
                            <option value="2">(Dextérité)</option>
                            <option value="3">(Constitution)</option>
                            <option value="4">(Intelligence)</option>
                            <option value="5">(Charisme)</option>
                            <option value="6">(Volonté)</option>
                        </select>
                    </div>
                    <div class="competence_final_double"><input type="number" class="input_comp_lock" name="attr_custom_3" value="0" min="0" max="99" readonly /></div>
                </div>
            </div> 
            <div class="competence_crane"></div>
            <div class="competence_separateur_centre"></div>
            <div class="competence_separateur_bas"></div>       
        </div>
    </div>
</div>

<div class="page_equipement">
    <div class="cadre_armement" style="display: block;">
        <div class="wrapper_zone_personnage">
            <div class="zone_armement_titre" style="padding-left: 50px;">ARMES ET ARMURES</div>
        </div>
        <div class="wrapper_zone_armement">
            <div class="bloc_armes">
                <div class="illustration_armes"></div>
                <div class="wrapper_zone_armes_titre">
                    <div class="armes_type_titre">TYPE</div>
                    <div class="armes_nom_titre">NOM</div>
                    <div class="armes_degats_titre">DÉGÂTS</div>
                    <div class="armes_portee_titre">PORTÉE</div>
                    <div class="armes_effet_titre">EFFETS</div>
                    <div class="armes_roll_titre">JET DE DÉGÂTS</div>
                </div>
                <div class="wrapper_zone_armes">
                    <div class="armes_type">
                        <select class="choix_armes" name="attr_armes_nom_1">
                            <option value="0"></option>
                            <option value="10" selected="selected">Mains nues</option>
                            <option value="1">Dague</option>
                            <option value="2">Épée courte</option>
                            <option value="3">Épée longue</option>
                            <option value="4">Hache</option>
                            <option value="5">Lance</option>
                            <option value="6">Masse d'arme</option>
                            <option value="7">Arc court</option>
                            <option value="8">Arc long</option>
                            <option value="9">Arbalète</option>
                        </select>
                    </div>
                    <div class="armes_nom">
                        <input name="attr_armes_designation_1" type="text" spellcheck="false" class="input_dotted_gauche">
                    </div>
                    <div class="armes_degats">
                        <input name="attr_armes_degats_1" type="text" spellcheck="false" class="input_dotted_centre">
                    </div>
                    <div class="armes_portee">
                        <input name="attr_armes_portee_1" type="text" spellcheck="false" class="input_dotted_centre">
                    </div>
                    <div class="armes_effet">
                        <input name="attr_armes_effet_1" type="text" spellcheck="false" class="input_dotted_gauche">
                    </div>
                    <div class="armes_prenotes"></div>
                    <div class="armes_notes">
                        <input name="attr_armes_notes_1" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                    </div>
                    <div class="armes_roll">
                        <button type="roll" class="button_comp" name="roll-degat_arme_1" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_1}}} {{result=[[@{armes_degats_1}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_1}}}"><span class="D20">J</span></button>
                    </div>
                </div>
                <div class="wrapper_zone_armes_separateur" style="grid-auto-rows: 1px;">     
                    <div class="separateur_armes"></div>
                </div>
                <div class="wrapper_zone_armes_separateur">     
                    <div class="separateur_armes_border"></div>
                </div>
                <div class="wrapper_zone_armes">
                    <div class="armes_type">
                        <select class="choix_armes" name="attr_armes_nom_2">
                            <option value="0" selected="selected"></option>
                            <option value="10">Mains nues</option>
                            <option value="1">Dague</option>
                            <option value="2">Épée courte</option>
                            <option value="3">Épée longue</option>
                            <option value="4">Hache</option>
                            <option value="5">Lance</option>
                            <option value="6">Masse d'arme</option>
                            <option value="7">Arc court</option>
                            <option value="8">Arc long</option>
                            <option value="9">Arbalète</option>
                        </select>
                    </div>
                    <div class="armes_nom">
                        <input name="attr_armes_designation_2" type="text" spellcheck="false" class="input_dotted_gauche">
                    </div>
                    <div class="armes_degats">
                        <input name="attr_armes_degats_2" type="text" spellcheck="false" class="input_dotted_centre">
                    </div>
                    <div class="armes_portee">
                        <input name="attr_armes_portee_2" type="text" spellcheck="false" class="input_dotted_centre">
                    </div>
                    <div class="armes_effet">
                        <input name="attr_armes_effet_2" type="text" spellcheck="false" class="input_dotted_gauche">
                    </div>
                    <div class="armes_prenotes"></div>
                    <div class="armes_notes">
                        <input name="attr_armes_notes_2" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                    </div>
                    <div class="armes_roll">
                        <button type="roll" class="button_comp" name="roll-degat_arme_2" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_2}}} {{result=[[@{armes_degats_2}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_2}}}"><span class="D20">J</span></button>
                    </div>
                </div>
                <div class="wrapper_zone_armes_separateur" style="grid-auto-rows: 1px;">     
                    <div class="separateur_armes"></div>
                </div>
                <div class="wrapper_zone_armes_separateur">     
                    <div class="separateur_armes_border"></div>
                </div>
                <div class="wrapper_zone_armes">
                    <div class="armes_type">
                        <select class="choix_armes" name="attr_armes_nom_3">
                            <option value="0" selected="selected"></option>
                            <option value="10">Mains nues</option>
                            <option value="1">Dague</option>
                            <option value="2">Épée courte</option>
                            <option value="3">Épée longue</option>
                            <option value="4">Hache</option>
                            <option value="5">Lance</option>
                            <option value="6">Masse d'arme</option>
                            <option value="7">Arc court</option>
                            <option value="8">Arc long</option>
                            <option value="9">Arbalète</option>
                        </select>
                    </div>
                    <div class="armes_nom">
                        <input name="attr_armes_designation_3" type="text" spellcheck="false" class="input_dotted_gauche">
                    </div>
                    <div class="armes_degats">
                        <input name="attr_armes_degats_3" type="text" spellcheck="false" class="input_dotted_centre">
                    </div>
                    <div class="armes_portee">
                        <input name="attr_armes_portee_3" type="text" spellcheck="false" class="input_dotted_centre">
                    </div>
                    <div class="armes_effet">
                        <input name="attr_armes_effet_3" type="text" spellcheck="false" class="input_dotted_gauche">
                    </div>
                    <div class="armes_prenotes"></div>
                    <div class="armes_notes">
                        <input name="attr_armes_notes_3" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                    </div>
                    <div class="armes_roll">
                        <button type="roll" class="button_comp" name="roll-degat_arme_3" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_3}}} {{result=[[@{armes_degats_3}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_3}}}"><span class="D20">J</span></button>
                    </div>
                </div>
                <div class="wrapper_zone_armes_separateur" style="grid-auto-rows: 1px;">     
                    <div class="separateur_armes"></div>
                </div>
                <div class="wrapper_zone_armes_separateur">     
                    <div class="separateur_armes_border"></div>
                </div>
                <div class="separateur_armes"></div>
                <div class="wrapper_zone_armes">
                    <div class="armes_type">
                        <select class="choix_armes" name="attr_armes_nom_4">
                            <option value="0" selected="selected"></option>
                            <option value="10">Mains nues</option>
                            <option value="1">Dague</option>
                            <option value="2">Épée courte</option>
                            <option value="3">Épée longue</option>
                            <option value="4">Hache</option>
                            <option value="5">Lance</option>
                            <option value="6">Masse d'arme</option>
                            <option value="7">Arc court</option>
                            <option value="8">Arc long</option>
                            <option value="9">Arbalète</option>
                        </select>
                    </div>
                    <div class="armes_nom">
                        <input name="attr_armes_designation_4" type="text" spellcheck="false" class="input_dotted_gauche">
                    </div>
                    <div class="armes_degats">
                        <input name="attr_armes_degats_4" type="text" spellcheck="false" class="input_dotted_centre">
                    </div>
                    <div class="armes_portee">
                        <input name="attr_armes_portee_4" type="text" spellcheck="false" class="input_dotted_centre">
                    </div>
                    <div class="armes_effet">
                        <input name="attr_armes_effet_4" type="text" spellcheck="false" class="input_dotted_gauche">
                    </div>
                    <div class="armes_prenotes"></div>
                    <div class="armes_notes">
                        <input name="attr_armes_notes_4" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                    </div>
                    <div class="armes_roll">
                        <button type="roll" class="button_comp" name="roll-degat_arme_4" value="&{template:thanatos} {{degat=oui}} {{title=@{armes_designation_4}}} {{result=[[@{armes_degats_4}[Dégâts de base]+@{bonus_force}[Bonus de Force]+@{bonus_reussite}[Dégâts de Réussite]]]}} {{effet=@{armes_effet_4}}}"><span class="D20">J</span></button>
                    </div>
                </div>
                <div class="wrapper_zone_armes_separateur" style="grid-auto-rows: 1px;">     
                    <div class="separateur_armes"></div>
                </div>
                <div class="wrapper_zone_armes_separateur">     
                    <div class="separateur_armes_border_end"></div>
                </div>
            </div>
            <div class="bloc_armures">
                <div class="wrapper_bloc_armures">
                    <input type="hidden" name="attr_armure_affichee" class="choix_armure" value="0">
                    <div class="illustration_armures_plaque"></div>
                    <div class="illustration_armures_maille"></div>
                    <div class="illustration_armures_cuir"></div>
                    <div class="illustration_armures_vetement"></div>
                    <div class="illustration_armures_aucune"></div>
                    <div class="tableau_armures">
                        <div class="wrapper_zone_armures_titre" style="background: none;grid-auto-rows: 25px;margin-bottom: 10px;margin-left: -25px;margin-right: -11px;">
                            <div class="armures_malus_titre" style="font-size: 11px;letter-spacing: 0px;">MALUS D'ARMURE</div>
                        </div>
                        <div class="wrapper_zone_armures_titre"style="margin-top: -14px;margin-left: -3px;padding-left: 3px;">
                            <div class="armures_equipee_titre"></div>
                            <div class="armures_type_titre">TYPE</div>
                            <div class="armures_encaissement_titre" style="font-size: 10px;margin-left: -50px;">ENCAISSEMENT</div>
                            <div class="armures_dexterite_titre">DEX</div>
                            <div class="armures_athletisme_titre">ATHLE</div>
                            <div class="armures_cac_titre">CAC</div>
                            <div class="armures_pugilat_titre">PUGILAT</div>
                            <div class="armures_distance_titre">DISTANCE</div>
                            <div class="armures_discretion_titre">DISCRETION</div>
                            <div class="armures_esquive_titre">ESQUIVE</div>
                        </div>
                        <div class="wrapper_zone_armures">
                            <div class="armures_equipee" title="Cliquer pour équiper l'armure">
                                <input type="checkbox" name="attr_armures_equipe_1" value="1" id="armure1">
                                <label for="armure1"></label>
                            </div>
                            <div class="armures_type">
                                <select class="choix_custom" name="attr_armures_nom_1">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">Vêtements renforcés</option>
                                    <option value="2">Cuir bouilli</option>
                                    <option value="3">Armures de mailles</option>
                                    <option value="4">Armure de plaque</option>
                                </select>
                            </div>
                            <div class="armures_encaissement">
                                <input name="attr_armures_encaissement_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_dexterite">
                                <input name="attr_armures_malus_dexterite_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_athletisme">
                                <input name="attr_armures_malus_athletisme_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_cac">
                                <input name="attr_armures_malus_combat_cac_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_pugilat">
                                <input name="attr_armures_malus_combat_pugilat_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_distance">
                                <input name="attr_armures_malus_combat_distance_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_discretion">
                                <input name="attr_armures_malus_discretion_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_esquive">
                                <input name="attr_armures_malus_esquive_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_prenotes"></div>
                            <div class="armures_notes">
                                <input name="attr_armures_notes_1" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                            </div>
                        </div>
                        <div class="wrapper_zone_armures_separateur" style="grid-auto-rows: 1px;">     
                            <div class="separateur_armures"></div>
                        </div>
                        <div class="wrapper_zone_armures_separateur">     
                            <div class="separateur_armures_border"></div>
                        </div>
                        <div class="wrapper_zone_armures">
                            <div class="armures_equipee" title="Cliquer pour équiper l'armure.">
                                <input type="checkbox" name="attr_armures_equipe_2" value="1" id="armure2">
                                <label for="armure2"></label>
                            </div>
                            <div class="armures_type">
                                <select class="choix_custom" name="attr_armures_nom_2">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">Vêtements renforcés</option>
                                    <option value="2">Cuir bouilli</option>
                                    <option value="3">Armures de mailles</option>
                                    <option value="4">Armure de plaque</option>
                                </select>
                            </div>
                            <div class="armures_encaissement">
                                <input name="attr_armures_encaissement_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_dexterite">
                                <input name="attr_armures_malus_dexterite_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_athletisme">
                                <input name="attr_armures_malus_athletisme_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_cac">
                                <input name="attr_armures_malus_combat_cac_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_pugilat">
                                <input name="attr_armures_malus_combat_pugilat_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_distance">
                                <input name="attr_armures_malus_combat_distance_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_discretion">
                                <input name="attr_armures_malus_discretion_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_esquive">
                                <input name="attr_armures_malus_esquive_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_prenotes"></div>
                            <div class="armures_notes">
                                <input name="attr_armures_notes_2" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                            </div>
                        </div>
                        <div class="wrapper_zone_armures_separateur" style="grid-auto-rows: 1px;">     
                            <div class="separateur_armures"></div>
                        </div>
                        <div class="wrapper_zone_armures_separateur">     
                            <div class="separateur_armures_border"></div>
                        </div>
                        <div class="wrapper_zone_armures">
                            <div class="armures_equipee" title="Cliquer pour équiper l'armure">
                                <input type="checkbox" name="attr_armures_equipe_3" value="1" id="armure3">
                                <label for="armure3"></label>
                            </div>
                            <div class="armures_type">
                                <select class="choix_custom" name="attr_armures_nom_3">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">Vêtements renforcés</option>
                                    <option value="2">Cuir bouilli</option>
                                    <option value="3">Armures de mailles</option>
                                    <option value="4">Armure de plaque</option>
                                </select>
                            </div>
                            <div class="armures_encaissement">
                                <input name="attr_armures_encaissement_3" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_dexterite">
                                <input name="attr_armures_malus_dexterite_3" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_athletisme">
                                <input name="attr_armures_malus_athletisme_3" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_cac">
                                <input name="attr_armures_malus_combat_cac_3" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_pugilat">
                                <input name="attr_armures_malus_combat_pugilat_3" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_distance">
                                <input name="attr_armures_malus_combat_distance_3" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_discretion">
                                <input name="attr_armures_malus_discretion_3" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_esquive">
                                <input name="attr_armures_malus_esquive_3" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="armures_prenotes"></div>
                            <div class="armures_notes">
                                <input name="attr_armures_notes_3" type="text" spellcheck="false" class="input_dotted_gauche" placeholder="Notes...">
                            </div>
                            <div class="separateur_armures_border_end"></div>
                        </div>
                    </div>                            
                </div>   
                <!-- BLOC bouclier -->
                <div class="wrapper_bloc_boucliers" style="margin-top: 45px;">
                    
                    <input type="hidden" name="attr_bouclier_affichee" class="choix_bouclier" value="0">
                    <div class="illustration_pavois"></div>
                    <div class="illustration_bouclier_rond"></div>
                    <div class="illustration_bouclier_aucun"></div>
                    <!-- Tableau bouclier -->
                    <div class="tableau_boucliers">
                        <div class="wrapper_zone_boucliers_titre" style="grid-auto-rows: 34px;line-height: 12px;margin-top: -14px;margin-left: -3px;padding-left: 3px;">
                            <div class="boucliers_equipee">
                            </div>
                            <div class="boucliers_type_titre">TYPE</div>
                            <div class="boucliers_parade_titre">BONUS PARADE</div>
                            <div class="boucliers_esquive_titre">MALUS ESQUIVE</div>
                            <div class="boucliers_notes_titre">NOTES</div>
                        </div>
                        <div class="wrapper_zone_boucliers" style="grid-auto-rows: 35px;">
                            <div class="boucliers_equipee">
                                <input type="checkbox" name="attr_boucliers_equipe_1" value="1" id="bouclier1">
                                <label for="bouclier1"></label>
                            </div>
                            <div class="boucliers_type">
                                <select class="choix_boucliers" name="attr_boucliers_nom_1">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">Bouclier rond</option>
                                    <option value="2">Pavois</option>
                                </select>
                            </div>
                            <div class="boucliers_parade">
                                <input name="attr_boucliers_bonus_parade_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="boucliers_esquive">
                                <input name="attr_boucliers_malus_esquive_1" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="boucliers_notes">
                                <input name="attr_boucliers_notes_1" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>
                        </div>
                        <div class="wrapper_zone_boucliers_separateur" style="grid-auto-rows: 1px;">     
                            <div class="separateur_boucliers"></div>
                        </div>
                        <div class="wrapper_zone_boucliers_separateur">     
                            <div class="separateur_boucliers_border"></div>
                        </div>
                        <div class="wrapper_zone_boucliers">
                            <div class="boucliers_equipee">
                                <input type="checkbox" name="attr_boucliers_equipe_2" value="1" id="bouclier2">
                                <label for="bouclier2"></label>
                            </div>
                            <div class="boucliers_type">
                                <select class="choix_boucliers" name="attr_boucliers_nom_2">
                                    <option value="0" selected="selected"></option>
                                    <option value="1">Bouclier rond</option>
                                    <option value="2">Pavois</option>
                                </select>
                            </div>
                            <div class="boucliers_parade">
                                <input name="attr_boucliers_bonus_parade_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="boucliers_esquive">
                                <input name="attr_boucliers_malus_esquive_2" type="number" spellcheck="false" class="input_dotted_centre">
                            </div>
                            <div class="boucliers_notes">
                                <input name="attr_boucliers_notes_2" type="text" spellcheck="false" class="input_dotted_gauche">
                            </div>                                    
                            <div class="separateur_boucliers_border_end"></div>
                        </div>                                
                    </div>
                </div>  
            </div>
        </div>
    </div> 
    <div class="cadre_inventaire" style="display: block;">
        <div class="wrapper_zone_personnage">
            <div class="zone_inventaire_titre" style="padding-left: 100px;">INVENTAIRE</div>
        </div>
        <div class="wrapper_bloc_inventaire">
            <div class="texte_sac"><textarea class="sac" spellcheck="false" name="attr_inventaire"></textarea></div>
            <div class="illustration_sac"></div>
            <div class="illustration_bourse"><input type="number" class="input_comp" name="attr_bourse" value="0" min="0" style="background: #fdfdfdbf;width: 50px !important;height: 50px !important;border: 1px solid black;font-family: 'Jim Nightshade';font-size: 18px;background-image: url(https://raw.githubusercontent.com/ctotone/JdR/refs/heads/main/Obscuritas/images/cercle_carac.webp);background-size: 49px 49px;background-repeat: no-repeat;"></div>
        </div>
    </div> 
</div>

<div class="page_note">
    <div class="cadre_carnet" style="display: block;">
        <div class="wrapper_zone_personnage">
            <div class="zone_carnet_titre" style="padding-left: 60px;">CARNET DE ROUTE</div>
        </div>
        <div class="wrapper_bloc_note">
            <div class="texte_note_gauche"><textarea class="carnet" name="attr_note_1"></textarea></div>
            <div class="texte_note_droite"><textarea class="carnet" name="attr_note_2"></textarea></div>
            <div class="illustration_carnet"></div>
        </div>
    </div> 
</div>

<div class="page_config">
    <div class="wrapper_config">
        <div class="config_titre1">Points de caractéristiques attribués : </div>
        <div class="config_data1"><input type="number" class="input_config" name="attr_points_carac" readonly /> / 235</div>
        <div class="config_titre2">Points de compétences attribués : </div>
        <div class="config_data2"><input type="number" class="input_config" name="attr_points_comp" readonly /> / 300</div>
    </div>

    <div class="wrapper_config_1" style="margin-top: 35px;">
        <div class="config_titre_tableau">Suivi des points d'hérésie des joueurs</div>
    </div>

    <div class="wrapper_config_1">
        <div class="config_titre1"><input type="text" class="input_ligne" name="attr_joueur_1" placeholder="Nom du personnage..."></div>
        <div class="config_data1"><input type="number" class="input_config" name="attr_heresie_joueur_1" placeholder="0"></div>
        <div class="config_titre2"><input type="text" class="input_ligne" name="attr_joueur_2" placeholder="Nom du personnage..."></div>
        <div class="config_data2"><input type="number" class="input_config" name="attr_heresie_joueur_2" placeholder="0"></div>
    </div>

    <div class="wrapper_config_1">
        <div class="config_titre1"><input type="text" class="input_ligne" name="attr_joueur_3" placeholder="Nom du personnage..."></div>
        <div class="config_data1"><input type="number" class="input_config" name="attr_heresie_joueur_3" placeholder="0"></div>
        <div class="config_titre2"><input type="text" class="input_ligne" name="attr_joueur_4" placeholder="Nom du personnage..."></div>
        <div class="config_data2"><input type="number" class="input_config" name="attr_heresie_joueur_4" placeholder="0"></div>
    </div>

    <div class="wrapper_config_1">
        <div class="config_titre1"><input type="text" class="input_ligne" name="attr_joueur_5" placeholder="Nom du personnage..."></div>
        <div class="config_data1"><input type="number" class="input_config" name="attr_heresie_joueur_5" placeholder="0"></div>
        <div class="config_titre2"><input type="text" class="input_ligne" name="attr_joueur_6" placeholder="Nom du personnage..."></div>
        <div class="config_data2"><input type="number" class="input_config" name="attr_heresie_joueur_6" placeholder="0"></div>
    </div>
</div>

<div class="page_compendium">
    <input type="hidden" name="attr_page_compendium" class="choix_compendium" value="0">
    <div class="wrapper_zone_personnage">
        <div class="zone_compendium_titre" style="padding-left: 70px;grid-row: 4 / 7;">COMPENDIUM</div>
    </div>
    <div class="wrapper_compendium_1col">
        <div class="compendium_1col_texte">Bienvenue dans ce compendium, une ressource destinée à rassembler les informations essentielles pour vos parties de jeu de rôle. Vous y trouverez les concepts clés de l’univers.<br>
        Cette page est conçue pour vous aider à mieux naviguer et enrichir vos aventures.</div>
    </div>
    <div class="wrapper_compendium_1col" style="margin-top: 20px;">
        <div class="compendium_1col_texte">
            <span class="point">◆</span><button type="action" class="button_carac" name="act_compendium_sm">Santé mentale</button><br>
            <span class="point">◆</span><button type="action" class="button_carac" name="act_compendium_hero">Mode Héroïque</button><br>
            <span class="point">◆</span><button type="action" class="button_carac" name="act_compendium_combat">Système de Combat</button><br>
        </div>
        <div class="compendium_1col_separateur"></div>
    </div>
    <div class="compendium_sm">
        <div class="wrapper_compendium_1col">
            <div class="compendium_1col_titre">Perte de Santé Mentale</div>
            <div class="compendium_1col_texte">
                Un personnage peut perdre de la santé mentale lors de :<br><br>
                Événements surnaturels :<br>
                <span class="point">◆</span>Être témoin d’un rituel de magie noire<br>
                <span class="point">◆</span>Voir un monstre pour la première fois<br>
                <span class="point">◆</span>Être possédé ou attaqué par un esprit<br>
                Scènes macabres :<br>
                <span class="point">◆</span>Découvrir un cadavre mutilé.<br>
                <span class="point">◆</span>Assister à une mort violente ou atroce<br>
                <span class="point">◆</span>Subir de terribles visions ou cauchemars<br>
                Actions contre-nature :<br>
                <span class="point">◆</span>Commettre un acte cruel ou immoral (ex. meurtre gratuit)<br>
                <span class="point">◆</span>Utiliser des objets maudits ou des rituels interdits
            </div>
        </div>
        <div class="wrapper_compendium_1col">
            <div class="compendium_1col_titre">Échelle de Perte</div>
            <div class="compendium_1col_texte">
                Le Maître du Jeu décide de l’impact psychologique de ces situations :<br>
                <span class="point">◆</span>Choc mineur : 1D4 points<br>
                <span class="point">◆</span>Horreur modérée : 1D6 points<br>
                <span class="point">◆</span>Horreur extrême : 1D10 ou plus<br><br>
                La perte peut être influencée par l'habitude du personnage à être confronté à une telle situation. Dans la
                plupart des cas, un jet de « Volonté » pur, sans la moindre compétence permet de ne prendre qu'une partie de
                l'impact sur la santé mentale, il peut même n'y avoir aucune conséquence...
            </div>
        </div>
        <div class="wrapper_compendium_1col">
            <div class="compendium_1col_titre">Tics Temporaires ou Définis</div>
            <div class="compendium_1col_texte">
                Un tic est une réponse nerveuse incontrôlée <br>
                <span class="point">◆</span>Tremblements<br>
                <span class="point">◆</span>Murmures incessants<br>
                <span class="point">◆</span>Regard constamment nerveux
            </div>
        </div>    
    </div>
    <div class="compendium_hero">
        <div class="wrapper_compendium_3col">
            <div class="compendium_3col_titre">"Révèle le héros en toi" : L’Ultime Sacrifice</div>
            <div class="compendium_3col_texte">En dépensant 7 points d’héroïsme, un personnage entre dans un état héroïque, devenant le centre de l’attention de la scène.</div>
        </div>
        <div class="wrapper_compendium_3col">
            <div class="compendium_3col_titre">Effets du Mode Héroïque :</div>
            <div class="compendium_3col_texte">
                <span class="point">◆</span><span style="font-weight: bold;">Focus narratif :</span>Le personnage devient le point central del’action, ses décisions et actions dictant le cours des événements. Les autres joueurs ne peuvent que le soutenir.<br>
                <span class="point">◆</span>Degrés de réussite partagés : Les degrés de réussite des actions pertinentes des alliés se cumulent aux siens.<br>
                <span class="point">◆</span>Activation des artefacts : Le personnage peut activer n’importe quel artefact, même si les conditions normales ne sont pas remplies.<br>
                <span class="point">◆</span>Bonus de +20 : À tous ses jets pour la durée de la scène.<br>
                <span class="point">◆</span>10 points de vie temporaires : Absorbent les dégâts avant que le personnage ne subisse des blessures réelles.<br>
                <span class="point">◆</span>Coûts magiques annulés : L’utilisation de magie et d’artefacts ne coûte ni points de magie ni points de vie pendant cette période.<br>
            </div>            
            <div class="compendium_3col_illustration_effet"></div>
        </div>
        <div class="wrapper_compendium_3col">
            <div class="compendium_3col_titre">Restrictions du Mode Héroïque :</div>
            <div class="compendium_3col_texte">
                <span class="point">◆</span>Décompte des coûts annulés : À la fin du mode héroïque, les points de vie et de magie qui auraient dû être dépensés sont déduits.<br>
            </div>
        </div>
        <div class="wrapper_compendium_3col" style="margin-left: 50px;padding-right: 208px;">
            <div class="compendium_3col_texte">
                <span class="point">○</span>Si ces valeurs tombent à 0 ou moins, le personnage est plafonné à 0, automatiquement stabilisé, mais sombre dans l’inconscience.<br>
                <span class="point">○</span>Durée d’inconscience : Un minimum d’une heure, plus une heure supplémentaire par point négatif (maximum de 24 heures).<br>
            </div>
        </div>
        <div class="wrapper_compendium_3col">
            <div class="compendium_3col_texte">
                <span class="point">◆</span>Interruption par des dégâts externes : Si le personnage subit des dégâts qui le mettent à 0 points de vie, le mode héroïque s’arrête immédiatement.<br>
                <span class="point">◆</span>Limites d’apprentissage : Annuler les coûts de magie ne permet pas d’apprendre de nouveaux sorts. Cependant, tous les artefacts peuvent être utilisés (sauf mention contraire dans leurs descriptions).<br>
            </div>            
            <div class="compendium_3col_illustration_restriction"></div>
        </div>
    </div>
    <div class="compendium_combat">
        <div class="wrapper_compendium_3col">
            <div class="compendium_3col_titre">Combat</div>
            <div class="compendium_3col_texte">Coming soon... (faut que Dakey me donne le fichier !!!)</div>
        </div>

    <!-- 
    <div class="wrapper_compendium_1col">
        <div class="compendium_1col_titre">Titre</div>
        <div class="compendium_1col_texte">compendium_2col_texte_gauche compendium 2coltexte gauche compendium_2col_texte_gauche compendium 2coltexte gauche compendium_2col_texte_gauche compendium 2coltexte gauche
            <br>compendium_2col_texte_gauche compendium 2coltexte gauche compendium_2col_texte_gauche compendium 2coltexte gauche compendium_</div>
    </div>

    <div class="wrapper_compendium_2col">
        <div class="compendium_2col_titre">Titre</div>
        <div class="compendium_2col_texte_gauche">
            compendium_2col_texte_gauche compendium 2coltexte gauche compendium_2col_texte_gauche compendium 2coltexte gauche compendium_2col_texte_gauche compendium 2coltexte gauche
            <br>compendium_2col_texte_gauche compendium 2coltexte gauche compendium_2col_texte_gauche compendium 2coltexte gauche compendium_
        </div>
        <div class="compendium_2col_separateur"></div>
        <div class="compendium_2col_texte_droite">compendium_2col_texte_gauche compendium 2coltexte gauche compendium_2col_texte_gauche compendium 2coltexte gauche compendium_2col_texte_gauche compendium 2coltexte gauche
            <br>compendium_2col_texte_gauche compendium 2coltexte gauche compendium_2col_texte_gauche compendium 2coltexte gauche compendium_</div>
    </div> -->

</div>


<!-- ------------------------------------------ -->
<!--              ROLL TEMPLATE                 -->
<!-- ------------------------------------------ -->

<rolltemplate class="sheet-rolltemplate-thanatos">
	<div class="sheet-toper"></div>
    {{#sens}}
        <div class="sheet-rolltemplate-thanatos-background sheet-rolltemplate-thanatos-center">
			<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-color">
				<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-header">
					{{title}}
				</div>
				<div class="sheet-separateur"></div>
				<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-subheader" style="padding-top: 0px;margin-top: 0px;">
					{{#rollTotal() des 1}}
					<span style="font-size: 30px;">Carte à <br>L'ENDROIT</span>
					{{/rollTotal() des 1}}
					{{#^rollTotal() des 1}}
					<span style="font-size: 30px;">Carte à <br>L'ENVERS</span>
					{{/^rollTotal() des 1}}
				</div>
				<div class="sheet-separateur"></div>
				<div class="sheet-rolltemplate-thanatos-center sheet-template-thanatos-rappel">
				</div>
			</div>
        </div>
    {{/sens}}
	{{#initiative}}
        <div class="sheet-rolltemplate-thanatos-background sheet-rolltemplate-thanatos-center">
			<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-color">
				<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-header">
					{{title}}
				</div>
				<div class="sheet-separateur"></div>
				<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-subheader">
					{{result}}
				</div>
				<div class="sheet-separateur"></div>
				<div class="sheet-rolltemplate-thanatos sheet-template-thanatos-texte">
					{{subheader}}
				</div>
			</div>
        </div>
    {{/initiative}}
	{{#annonce_armes}}
        <div class="sheet-rolltemplate-thanatos-background sheet-rolltemplate-thanatos-center">
			<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-color">
				<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-header">
					{{title}}
				</div>
				<div class="sheet-separateur"></div>
				<div class="sheet-content">
				{{#allprops() title subheader annonce_armes}}
				  <div class="sheet-key">{{key}}</div>
				  <div class="sheet-value">{{value}}</div>
				{{/allprops() title subheader annonce_armes}}
				</div>
			</div>
        </div>
    {{/annonce_armes}}
	{{#annonce_artillerie}}
        <div class="sheet-rolltemplate-thanatos-background sheet-rolltemplate-thanatos-center">
			<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-color">
				<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-header">
					{{title}}
				</div>
				<div class="sheet-separateur"></div>
				<div class="sheet-content">
				{{#allprops() title subheader annonce_artillerie}}
				  <div class="sheet-key">{{key}}</div>
				  <div class="sheet-value">{{value}}</div>
				{{/allprops() title subheader annonce_artillerie}}
				</div>
			</div>
        </div>
    {{/annonce_artillerie}}
    {{#jet}}
        <div class="sheet-rolltemplate-thanatos-background sheet-rolltemplate-thanatos-center">
			<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-color">
		
				<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-header">
					{{title}} <span style="font-size: 17px;">({{stat}})</span>
					<br><span style="font-size: 20px; font-weight: normal;">{{subheader}}</span>
				</div>
				<div class="sheet-separateur"></div>
                {{#rollGreater() des 95}}
                    <div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-subheader-echec-critique">{{des}}</div>
                    <div class="sheet-rolltemplate-thanatos sheet-template-thanatos-texte-echec-critique">Échec Critique</div>
                {{/rollGreater() des 95}}
                {{#^rollGreater() des 95}}
                    {{#^rollGreater() des 5}}
                        <div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-subheader-reussite-critique">{{des}}</div>
                        <div class="sheet-rolltemplate-thanatos sheet-template-thanatos-texte-reussite-critique">Réussite critique
                            {{#^rollTotal() computed::degre 0}}
                            <br><span style="font-size:20px !important;">avec {{computed::degre}} degrés</span>
                            {{/^rollTotal() computed::degre 0}}
                            {{#show_degat}}
                                <br>
                                <hr>
                                <span style="color: #000000; font-size: 20px;">JET DE DÉGÂTS</span>
                                <br>
                                {{arme1}}
                                <br>
                                {{arme2}}
                                <br>
                                {{arme3}}
                                <br>
                                {{arme4}}
                                <br>
                            {{/show_degat}}
                        </div>
                    {{/^rollGreater() des 5}}
                    {{#rollGreater() des 5}}
                        {{#rollGreater() des computed::roll}}
                            <div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-subheader-echec">{{des}}</div>
                            <div class="sheet-rolltemplate-thanatos sheet-template-thanatos-texte-echec">Échec </div>
                        {{/rollGreater() des computed::roll}}
                        {{#^rollGreater() des computed::roll}}
                            <div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-subheader-reussite">{{des}}</div>
                            <div class="sheet-rolltemplate-thanatos sheet-template-thanatos-texte-reussite">Reussite
                                {{#^rollTotal() computed::degre 0}}
                                <br><span style="font-size:20px !important;">avec {{computed::degre}} degrés</span>
                                {{/^rollTotal() computed::degre 0}}
                                {{#show_degat}}
                                    <br>
                                    <hr>
                                    <span style="color: #000000; font-size: 20px;">JET DE DÉGÂTS</span>
                                    <br>
                                    {{arme1}}
                                    <br>
                                    {{arme2}}
                                    <br>
                                    {{arme3}}
                                    <br>
                                    {{arme4}}
                                    <br>
                                {{/show_degat}}
                            </div>
                        {{/^rollGreater() des computed::roll}}
                    {{/rollGreater() des 5}}
                {{/^rollGreater() des 95}}
				
				<div class="sheet-separateur"></div>
				<div class="sheet-rolltemplate-thanatos-center sheet-template-thanatos-rappel">
					Modificateur ({{mod}}) | Blessure ({{malus_blessure}})
				</div>
			</div>
        </div>
    {{/jet}}
    {{#degat}}
        <div class="sheet-rolltemplate-thanatos-background sheet-rolltemplate-thanatos-center">
			<div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-color">
                <div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-header">
                    {{title}}
                    <br>
                    <span style="font-size:24px;">inflige</span>
                </div>
                <div class="sheet-rolltemplate-thanatos-center sheet-rolltemplate-thanatos-subheader" style="color: #ff0000;font-size: 31px !important;">
                    {{#rollTotal() result 1}}
                    {{result}} dégât
                    {{/rollTotal() result 1}}
                    {{#^rollTotal() result 1}}
                    {{result}} dégâts
                    {{/^rollTotal() result 1}}
                    <br><br><span style="font-size: 17px;font-style: italic;color: #000000 !important;">{{effet}}</span>
                </div>
                    
                <div class="sheet-separateur"></div>
                <div class="sheet-rolltemplate-thanatos-center sheet-template-thanatos-rappel"></div>
            </div>
        </div>
    {{/degat}}
	<div class="sheet-bottom"></div>
</rolltemplate>



<!-- ------------------------------------------ -->
<!--                  SCRIPT                    -->
<!-- ------------------------------------------ -->

<!-- Custom Attributs  / Menu -->
<script type="text/worker">
    const buttonlist = ["0", "1", "2", "3", "4", "5", "6", "7"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                page: button
            });
        });
    });

    
    on("sheet:opened change:custom_stat_1 change:custom_stat_2 change:custom_stat_3 change:custom_stat_4 change:custom_comp_1 change:custom_comp_2 change:custom_comp_3 change:custom_comp_4 change:force change:dexterite change:constitution change:intelligence change:charisme change:volonte change:total_armures_malus_demi_dexterite change:total_armures_malus_athletisme change:total_armures_malus_combat_cac change:total_armures_malus_combat_pugilat change:total_armures_malus_combat_distance change:total_armures_malus_discretion change:total_armures_malus_esquive change:total_boucliers_malus_esquive", function() {

        getAttrs(["custom_stat_1", "custom_stat_2", "custom_stat_3", "custom_stat_4", "custom_comp_1", "custom_comp_2", "custom_comp_3", "custom_comp_4", "force", "dexterite", "constitution", "intelligence", "charisme", "volonte", "stat_athletisme", "stat_baratin", "stat_bibliotheque", "stat_chercher", "stat_combat_cac", "stat_combat_pugilat", "stat_combat_distance", "stat_discretion", "stat_endurance", "stat_esquive", "stat_langue_ancienne", "stat_langue", "stat_medecine", "stat_metier", "stat_perception", "stat_psychologie", "stat_science", "stat_sciences_occultes", "stat_survie", "stat_vigilance", "total_armures_malus_demi_dexterite", "total_armures_malus_athletisme", "total_armures_malus_combat_cac", "total_armures_malus_combat_pugilat", "total_armures_malus_combat_distance", "total_armures_malus_discretion", "total_armures_malus_esquive", "total_boucliers_malus_esquive"], function(values) {
            let custom_stat_1 = parseInt(values["custom_stat_1"]) || 0;
            let custom_stat_2 = parseInt(values["custom_stat_2"]) || 0;
            let custom_stat_3 = parseInt(values["custom_stat_3"]) || 0;
            let custom_stat_4 = parseInt(values["custom_stat_4"]) || 0;
            let custom_comp_1 = parseInt(values["custom_comp_1"]) || 0;
            let custom_comp_2 = parseInt(values["custom_comp_2"]) || 0;
            let custom_comp_3 = parseInt(values["custom_comp_3"]) || 0;
            let custom_comp_4 = parseInt(values["custom_comp_4"]) || 0;

            let total_armures_malus_demi_dexterite = parseInt(values["total_armures_malus_demi_dexterite"]) || 0;
            let total_armures_malus_athletisme = parseInt(values["total_armures_malus_athletisme"]) || 0;
            let total_armures_malus_combat_cac = parseInt(values["total_armures_malus_combat_cac"]) || 0;
            let total_armures_malus_combat_pugilat = parseInt(values["total_armures_malus_combat_pugilat"]) || 0;
            let total_armures_malus_combat_distance = parseInt(values["total_armures_malus_combat_distance"]) || 0;
            let total_armures_malus_discretion = parseInt(values["total_armures_malus_discretion"]) || 0;
            let total_armures_malus_esquive = parseInt(values["total_armures_malus_esquive"]) || 0;
            let total_boucliers_malus_esquive = parseInt(values["total_boucliers_malus_esquive"]) || 0;

            let force = parseInt(values["force"]) || 0;
            let dexterite = parseInt(values["dexterite"]) || 0;
            let constitution = parseInt(values["constitution"]) || 0;
            let intelligence = parseInt(values["intelligence"]) || 0;
            let charisme = parseInt(values["charisme"]) || 0;
            let volonte = parseInt(values["volonte"]) || 0;
            let stat_athletisme = parseInt(values["stat_athletisme"]) || 0;
            let stat_baratin = parseInt(values["stat_baratin"]) || 0;
            let stat_bibliotheque = parseInt(values["stat_bibliotheque"]) || 0;
            let stat_chercher = parseInt(values["stat_chercher"]) || 0;
            let stat_combat_cac = parseInt(values["stat_combat_cac"]) || 0;
            let stat_combat_pugilat = parseInt(values["stat_combat_pugilat"]) || 0;
            let stat_combat_distance = parseInt(values["stat_combat_distance"]) || 0;
            let stat_discretion = parseInt(values["stat_discretion"]) || 0;
            let stat_endurance = parseInt(values["stat_endurance"]) || 0;
            let stat_esquive = parseInt(values["stat_esquive"]) || 0;
            let stat_langue_ancienne = parseInt(values["stat_langue_ancienne"]) || 0;
            let stat_langue = parseInt(values["stat_langue"]) || 0;
            let stat_medecine = parseInt(values["stat_medecine"]) || 0;
            let stat_metier = parseInt(values["stat_metier"]) || 0;
            let stat_perception = parseInt(values["stat_perception"]) || 0;
            let stat_psychologie = parseInt(values["stat_psychologie"]) || 0;
            let stat_science = parseInt(values["stat_science"]) || 0;
            let stat_sciences_occultes = parseInt(values["stat_sciences_occultes"]) || 0;
            let stat_survie = parseInt(values["stat_survie"]) || 0;
            let stat_vigilance = parseInt(values["stat_vigilance"]) || 0;

            if      (custom_stat_1 == 1) stat_1 = stat_athletisme - total_armures_malus_athletisme, stat_1_name = "Athlétisme";
            else if (custom_stat_1 == 2) stat_1 = stat_baratin, stat_1_name = "Baratin";
            else if (custom_stat_1 == 3) stat_1 = stat_bibliotheque, stat_1_name = "Bibliothèque";
            else if (custom_stat_1 == 4) stat_1 = stat_chercher, stat_1_name = "Chercher";
            else if (custom_stat_1 == 5) stat_1 = stat_combat_cac - total_armures_malus_combat_cac, stat_1_name = "Corps à corps";
            else if (custom_stat_1 == 6) stat_1 = stat_combat_pugilat - total_armures_malus_combat_pugilat, stat_1_name = "Pugilat";
            else if (custom_stat_1 == 7) stat_1 = stat_combat_distance, stat_1_name = "Distance";
            else if (custom_stat_1 == 8) stat_1 = stat_discretion - total_armures_malus_discretion, stat_1_name = "Discrétion";
            else if (custom_stat_1 == 9) stat_1 = stat_endurance, stat_1_name = "Endurance";
            else if (custom_stat_1 == 10) stat_1 = stat_esquive - total_armures_malus_esquive - total_boucliers_malus_esquive, stat_1_name = "Esquive";
            else if (custom_stat_1 == 11) stat_1 = stat_langue_ancienne, stat_1_name = "Langue ancienne";
            else if (custom_stat_1 == 12) stat_1 = stat_langue, stat_1_name = "Langue";
            else if (custom_stat_1 == 13) stat_1 = stat_medecine, stat_1_name = "Médecine";
            else if (custom_stat_1 == 14) stat_1 = stat_metier, stat_1_name = "Métier";
            else if (custom_stat_1 == 15) stat_1 = stat_perception, stat_1_name = "Perception";
            else if (custom_stat_1 == 16) stat_1 = stat_psychologie, stat_1_name = "Psychologie";
            else if (custom_stat_1 == 17) stat_1 = stat_science, stat_1_name = "Sciences";
            else if (custom_stat_1 == 18) stat_1 = stat_sciences_occultes, stat_1_name = "Sciences occultes";
            else if (custom_stat_1 == 19) stat_1 = stat_survie, stat_1_name = "Survie";
            else if (custom_stat_1 == 20) stat_1 = stat_vigilance, stat_1_name = "Vigilance";
            else stat_1 = 0, stat_1_name = "";

            if      (custom_stat_2 == 1) stat_2 = stat_athletisme - total_armures_malus_athletisme, stat_2_name = "Athlétisme";
            else if (custom_stat_2 == 2) stat_2 = stat_baratin, stat_2_name = "Baratin";
            else if (custom_stat_2 == 3) stat_2 = stat_bibliotheque, stat_2_name = "Bibliothèque";
            else if (custom_stat_2 == 4) stat_2 = stat_chercher, stat_2_name = "Chercher";
            else if (custom_stat_2 == 5) stat_2 = stat_combat_cac - total_armures_malus_combat_cac, stat_2_name = "Corps à corps";
            else if (custom_stat_2 == 6) stat_2 = stat_combat_pugilat - total_armures_malus_combat_pugilat, stat_2_name = "Pugilat";
            else if (custom_stat_2 == 7) stat_2 = stat_combat_distance - total_armures_malus_combat_distance, stat_2_name = "Distance";
            else if (custom_stat_2 == 8) stat_2 = stat_discretion - total_armures_malus_discretion, stat_2_name = "Discrétion";
            else if (custom_stat_2 == 9) stat_2 = stat_endurance, stat_2_name = "Endurance";
            else if (custom_stat_2 == 10) stat_2 = stat_esquive - total_armures_malus_esquive - total_boucliers_malus_esquive, stat_2_name = "Esquive";
            else if (custom_stat_2 == 11) stat_2 = stat_langue_ancienne, stat_2_name = "Langue ancienne";
            else if (custom_stat_2 == 12) stat_2 = stat_langue, stat_2_name = "Langue";
            else if (custom_stat_2 == 13) stat_2 = stat_medecine, stat_2_name = "Médecine";
            else if (custom_stat_2 == 14) stat_2 = stat_metier, stat_2_name = "Métier";
            else if (custom_stat_2 == 15) stat_2 = stat_perception, stat_2_name = "Perception";
            else if (custom_stat_2 == 16) stat_2 = stat_psychologie, stat_2_name = "Psychologie";
            else if (custom_stat_2 == 17) stat_2 = stat_science, stat_2_name = "Sciences";
            else if (custom_stat_2 == 18) stat_2 = stat_sciences_occultes, stat_2_name = "Sciences occultes";
            else if (custom_stat_2 == 19) stat_2 = stat_survie, stat_2_name = "Survie";
            else if (custom_stat_2 == 20) stat_2 = stat_vigilance, stat_2_name = "Vigilance";
            else stat_2 = 0, stat_2_name = "";

            if      (custom_stat_3 == 1) stat_3 = stat_athletisme - total_armures_malus_athletisme, stat_3_name = "Athlétisme";
            else if (custom_stat_3 == 2) stat_3 = stat_baratin, stat_3_name = "Baratin";
            else if (custom_stat_3 == 3) stat_3 = stat_bibliotheque, stat_3_name = "Bibliothèque";
            else if (custom_stat_3 == 4) stat_3 = stat_chercher, stat_3_name = "Chercher";
            else if (custom_stat_3 == 5) stat_3 = stat_combat_cac - total_armures_malus_combat_cac, stat_3_name = "Corps à corps";
            else if (custom_stat_3 == 6) stat_3 = stat_combat_pugilat - total_armures_malus_combat_pugilat, stat_3_name = "Pugilat";
            else if (custom_stat_3 == 7) stat_3 = stat_combat_distance - total_armures_malus_combat_distance, stat_3_name = "Distance";
            else if (custom_stat_3 == 8) stat_3 = stat_discretion - total_armures_malus_discretion, stat_3_name = "Discrétion";
            else if (custom_stat_3 == 9) stat_3 = stat_endurance, stat_3_name = "Endurance";
            else if (custom_stat_3 == 10) stat_3 = stat_esquive - total_armures_malus_esquive - total_boucliers_malus_esquive, stat_3_name = "Esquive";
            else if (custom_stat_3 == 11) stat_3 = stat_langue_ancienne, stat_3_name = "Langue ancienne";
            else if (custom_stat_3 == 12) stat_3 = stat_langue, stat_3_name = "Langue";
            else if (custom_stat_3 == 13) stat_3 = stat_medecine, stat_3_name = "Médecine";
            else if (custom_stat_3 == 14) stat_3 = stat_metier, stat_3_name = "Métier";
            else if (custom_stat_3 == 15) stat_3 = stat_perception, stat_3_name = "Perception";
            else if (custom_stat_3 == 16) stat_3 = stat_psychologie, stat_3_name = "Psychologie";
            else if (custom_stat_3 == 17) stat_3 = stat_science, stat_3_name = "Sciences";
            else if (custom_stat_3 == 18) stat_3 = stat_sciences_occultes, stat_3_name = "Sciences occultes";
            else if (custom_stat_3 == 19) stat_3 = stat_survie, stat_3_name = "Survie";
            else if (custom_stat_3 == 20) stat_3 = stat_vigilance, stat_3_name = "Vigilance";
            else stat_3 = 0, stat_3_name = "";

            if      (custom_stat_4 == 1) stat_4 = stat_athletisme - total_armures_malus_athletisme, stat_4_name = "Athlétisme";
            else if (custom_stat_4 == 2) stat_4 = stat_baratin, stat_4_name = "Baratin";
            else if (custom_stat_4 == 3) stat_4 = stat_bibliotheque, stat_4_name = "Bibliothèque";
            else if (custom_stat_4 == 4) stat_4 = stat_chercher, stat_4_name = "Chercher";
            else if (custom_stat_4 == 5) stat_4 = stat_combat_cac - total_armures_malus_combat_cac, stat_4_name = "Corps à corps";
            else if (custom_stat_4 == 6) stat_4 = stat_combat_pugilat - total_armures_malus_combat_pugilat, stat_4_name = "Pugilat";
            else if (custom_stat_4 == 7) stat_4 = stat_combat_distance - total_armures_malus_combat_distance, stat_4_name = "Distance";
            else if (custom_stat_4 == 8) stat_4 = stat_discretion - total_armures_malus_discretion, stat_4_name = "Discrétion";
            else if (custom_stat_4 == 9) stat_4 = stat_endurance, stat_4_name = "Endurance";
            else if (custom_stat_4 == 10) stat_4 = stat_esquive - total_armures_malus_esquive - total_boucliers_malus_esquive, stat_4_name = "Esquive";
            else if (custom_stat_4 == 11) stat_4 = stat_langue_ancienne, stat_4_name = "Langue ancienne";
            else if (custom_stat_4 == 12) stat_4 = stat_langue, stat_4_name = "Langue";
            else if (custom_stat_4 == 13) stat_4 = stat_medecine, stat_4_name = "Médecine";
            else if (custom_stat_4 == 14) stat_4 = stat_metier, stat_4_name = "Métier";
            else if (custom_stat_4 == 15) stat_4 = stat_perception, stat_4_name = "Perception";
            else if (custom_stat_4 == 16) stat_4 = stat_psychologie, stat_4_name = "Psychologie";
            else if (custom_stat_4 == 17) stat_4 = stat_science, stat_4_name = "Sciences";
            else if (custom_stat_4 == 18) stat_4 = stat_sciences_occultes, stat_4_name = "Sciences occultes";
            else if (custom_stat_4 == 19) stat_4 = stat_survie, stat_4_name = "Survie";
            else if (custom_stat_4 == 20) stat_4 = stat_vigilance, stat_4_name = "Vigilance";
            else stat_4 = 0, stat_4_name = "";

            if      (custom_comp_1 == 1) comp_1 = force, comp_1_name = "Force";
            else if (custom_comp_1 == 2) comp_1 = dexterite - total_armures_malus_demi_dexterite, comp_1_name = "Dextérité";
            else if (custom_comp_1 == 3) comp_1 = constitution, comp_1_name = "Constitution";
            else if (custom_comp_1 == 4) comp_1 = intelligence, comp_1_name = "Intelligence";
            else if (custom_comp_1 == 5) comp_1 = charisme, comp_1_name = "Charisme";
            else if (custom_comp_1 == 6) comp_1 = volonte, comp_1_name = "Volonté";
            else comp_1 = 0, comp_1_name = "";

            if      (custom_comp_2 == 1) comp_2 = force, comp_2_name = "Force";
            else if (custom_comp_2 == 2) comp_2 = dexterite - total_armures_malus_demi_dexterite, comp_2_name = "Dextérité";
            else if (custom_comp_2 == 3) comp_2 = constitution, comp_2_name = "Constitution";
            else if (custom_comp_2 == 4) comp_2 = intelligence, comp_2_name = "Intelligence";
            else if (custom_comp_2 == 5) comp_2 = charisme, comp_2_name = "Charisme";
            else if (custom_comp_2 == 6) comp_2 = volonte, comp_2_name = "Volonté";
            else comp_2 = 0, comp_2_name = "";

            if      (custom_comp_3 == 1) comp_3 = force, comp_3_name = "Force";
            else if (custom_comp_3 == 2) comp_3 = dexterite - total_armures_malus_demi_dexterite, comp_3_name = "Dextérité";
            else if (custom_comp_3 == 3) comp_3 = constitution, comp_3_name = "Constitution";
            else if (custom_comp_3 == 4) comp_3 = intelligence, comp_3_name = "Intelligence";
            else if (custom_comp_3 == 5) comp_3 = charisme, comp_3_name = "Charisme";
            else if (custom_comp_3 == 6) comp_3 = volonte, comp_3_name = "Volonté";
            else comp_3 = 0, comp_3_name = "";

            if      (custom_comp_4 == 1) comp_4 = force, comp_4_name = "Force";
            else if (custom_comp_4 == 2) comp_4 = dexterite - total_armures_malus_demi_dexterite, comp_4_name = "Dextérité";
            else if (custom_comp_4 == 3) comp_4 = constitution, comp_4_name = "Constitution";
            else if (custom_comp_4 == 4) comp_4 = intelligence, comp_4_name = "Intelligence";
            else if (custom_comp_4 == 5) comp_4 = charisme, comp_4_name = "Charisme";
            else if (custom_comp_4 == 6) comp_4 = volonte, comp_4_name = "Volonté";
            else comp_4 = 0, comp_4_name = "";
            
            setAttrs({
                "stat_1": stat_1,
                "stat_2": stat_2,
                "stat_3": stat_3,
                "stat_4": stat_4,
                "stat_1_name": stat_1_name,
                "stat_2_name": stat_2_name,
                "stat_3_name": stat_3_name,
                "stat_4_name": stat_4_name,
                "comp_1": comp_1,
                "comp_2": comp_2,
                "comp_3": comp_3,
                "comp_4": comp_4,
                "comp_1_name": comp_1_name,
                "comp_2_name": comp_2_name,
                "comp_3_name": comp_3_name,
                "comp_4_name": comp_4_name
            });
        });
    });
</script>

<!-- Roll modifier / MAJ Stats  -->
<script type="text/worker"> 

    on("sheet:opened", function(eventInfo){
        setAttrs({
            rollmodifier: "?{Modificateur|0|+10|+20|+30|+40|+50|-10|-20|-30|-40|-50}",
        });
    });	

    on("change:pdv", function() {

        getAttrs(["pdv", "pdv_maxi"], function(values) {

            let pdv = parseInt(values["pdv"]) || 0;
            let pdv_maxi = parseInt(values["pdv_maxi"]) || 0;
            let malus_blessure = 0;
            
            if (pdv <= pdv_maxi * 0.25) {
                malus_blessure = -10; // Moins de 25%
            } else if (pdv <= pdv_maxi * 0.5) {
                malus_blessure = -5; // Moins de 50%
            }
            
            setAttrs({
                "malus_blessure": malus_blessure
            });
        });
    });

     
    on("sheet:opened change:stat_1 change:stat_2 change:stat_3 change:stat_4 change:comp_1 change:comp_2 change:comp_3 change:comp_4 change:force change:dexterite change:constitution change:intelligence change:charisme change:volonte change:stat_athletisme change:stat_baratin change:stat_bibliotheque change:stat_chercher change:stat_combat_cac change:stat_combat_pugilat change:stat_combat_distance change:stat_discretion change:stat_endurance change:stat_esquive change:stat_langue_ancienne change:stat_langue change:stat_medecine change:stat_metier change:stat_perception change:stat_psychologie change:stat_science change:stat_sciences_occultes change:stat_survie change:stat_vigilance ", function() {

        getAttrs(["stat_1", "stat_2", "stat_3", "stat_4", "comp_1", "comp_2", "comp_3", "comp_4", "force", "dexterite", "constitution", "intelligence", "charisme", "volonte", "sm", "stat_athletisme", "stat_baratin", "stat_bibliotheque", "stat_chercher", "stat_combat_cac", "stat_combat_pugilat", "stat_combat_distance", "stat_discretion", "stat_endurance", "stat_esquive", "stat_langue_ancienne", "stat_langue", "stat_medecine", "stat_metier", "stat_perception", "stat_psychologie", "stat_science", "stat_sciences_occultes", "stat_survie", "stat_vigilance"], function(values) {
            let stat_1 = parseInt(values["stat_1"]) || 0;
            let stat_2 = parseInt(values["stat_2"]) || 0;
            let stat_3 = parseInt(values["stat_3"]) || 0;
            let stat_4 = parseInt(values["stat_4"]) || 0;
            let comp_1 = parseInt(values["comp_1"]) || 0;
            let comp_2 = parseInt(values["comp_2"]) || 0;
            let comp_3 = parseInt(values["comp_3"]) || 0;
            let comp_4 = parseInt(values["comp_4"]) || 0;            
            let force = parseInt(values["force"]) || 0;
            let dexterite = parseInt(values["dexterite"]) || 0;
            let constitution = parseInt(values["constitution"]) || 0;
            let intelligence = parseInt(values["intelligence"]) || 0;
            let charisme = parseInt(values["charisme"]) || 0;
            let volonte = parseInt(values["volonte"]) || 0;
            let sm = parseInt(values["sm"]) || 0;
            let stat_athletisme = parseInt(values["stat_athletisme"]) || 0;
            let stat_baratin = parseInt(values["stat_baratin"]) || 0;
            let stat_bibliotheque = parseInt(values["stat_bibliotheque"]) || 0;
            let stat_chercher = parseInt(values["stat_chercher"]) || 0;
            let stat_combat_cac = parseInt(values["stat_combat_cac"]) || 0;
            let stat_combat_pugilat = parseInt(values["stat_combat_pugilat"]) || 0;
            let stat_combat_distance = parseInt(values["stat_combat_distance"]) || 0;
            let stat_discretion = parseInt(values["stat_discretion"]) || 0;
            let stat_endurance = parseInt(values["stat_endurance"]) || 0;
            let stat_esquive = parseInt(values["stat_esquive"]) || 0;
            let stat_langue_ancienne = parseInt(values["stat_langue_ancienne"]) || 0;
            let stat_langue = parseInt(values["stat_langue"]) || 0;
            let stat_medecine = parseInt(values["stat_medecine"]) || 0;
            let stat_metier = parseInt(values["stat_metier"]) || 0;
            let stat_perception = parseInt(values["stat_perception"]) || 0;
            let stat_psychologie = parseInt(values["stat_psychologie"]) || 0;
            let stat_science = parseInt(values["stat_science"]) || 0;
            let stat_sciences_occultes = parseInt(values["stat_sciences_occultes"]) || 0;
            let stat_survie = parseInt(values["stat_survie"]) || 0;
            let stat_vigilance = parseInt(values["stat_vigilance"]) || 0;
        
            let pdv_maxi = Math.floor(constitution / 5);
            let pdm_maxi = Math.floor(volonte / 5);
            let sm_maxi = 100-intelligence;
            let mouvement = Math.floor(dexterite/10)*2;
            let bonus_force = Math.floor(force/10);            
            let bonus_dexterite = Math.floor(dexterite/10);
            let points_carac = force + dexterite + constitution + intelligence + charisme + volonte;
            let points_comp = stat_athletisme + stat_baratin + stat_bibliotheque + stat_chercher + stat_combat_cac + stat_combat_pugilat + stat_combat_distance + stat_discretion + stat_endurance + stat_esquive + stat_langue_ancienne + stat_langue + stat_medecine + stat_metier + stat_perception + stat_psychologie + stat_science + stat_sciences_occultes + stat_survie + stat_vigilance;

            let athletisme_force = Math.floor(stat_athletisme + (force/2));
            let athletisme_dexterite = Math.floor(stat_athletisme + (dexterite/2));
            let baratin_charisme = Math.floor(stat_baratin + (charisme/2));
            let baratin_force = Math.floor(stat_baratin + (force/2));
            let bibliotheque = Math.floor(stat_bibliotheque + (intelligence/2));
            let chercher = Math.floor(stat_chercher + (intelligence/2));
            let combat_cac_dexterite = Math.floor(stat_combat_cac + (dexterite/2));
            let combat_cac_force = Math.floor(stat_combat_cac + (force/2));
            let combat_pugilat = Math.floor(stat_combat_pugilat + (dexterite/2));
            let combat_distance = Math.floor(stat_combat_distance + (dexterite/2));
            let discretion = Math.floor(stat_discretion + (dexterite/2));
            let endurance = Math.floor(stat_endurance + (constitution/2));
            let esquive = Math.floor(stat_esquive + (dexterite/2));
            let langue_ancienne_intelligence = Math.floor(stat_langue_ancienne + (intelligence/2));
            let langue_ancienne_volonte = Math.floor(stat_langue_ancienne + (volonte/2));
            let langue = Math.floor(stat_langue + (intelligence/2));
            let medecine = Math.floor(stat_medecine + (intelligence/2));
            let metier_intelligence = Math.floor(stat_metier + (intelligence/2));
            let metier_volonte = Math.floor(stat_metier + (volonte/2));
            let perception = Math.floor(stat_perception + (volonte/2));
            let psychologie = Math.floor(stat_psychologie + (intelligence/2));
            let science = Math.floor(stat_science + (intelligence/2));
            let sciences_occultes = Math.floor(stat_sciences_occultes + (volonte/2));
            let survie = Math.floor(stat_survie + (intelligence/2));
            let vigilance = Math.floor(stat_vigilance + (dexterite/2));
            let custom_1 = Math.floor(stat_1 + (comp_1/2));
            let custom_2 = Math.floor(stat_2 + (comp_2/2));
            let custom_3 = Math.floor(stat_3 + (comp_3/2));
            let custom_4 = Math.floor(stat_4 + (comp_4/2));


            setAttrs({
                "pdv_maxi": pdv_maxi,
                "pdm_maxi": pdm_maxi,
                "sm_maxi": sm_maxi,
                "mouvement": mouvement,
                "bonus_force":bonus_force,
                "bonus_dexterite":bonus_dexterite,
                "athletisme_force": athletisme_force,
                "athletisme_dexterite": athletisme_dexterite,
                "baratin_charisme": baratin_charisme,
                "baratin_force": baratin_force,
                "bibliotheque": bibliotheque,
                "chercher": chercher,
                "combat_cac_dexterite": combat_cac_dexterite,
                "combat_cac_force": combat_cac_force,
                "combat_pugilat": combat_pugilat,
                "combat_distance": combat_distance,
                "discretion": discretion,
                "endurance": endurance,
                "esquive": esquive,
                "langue_ancienne_intelligence": langue_ancienne_intelligence,
                "langue_ancienne_volonte": langue_ancienne_volonte,
                "langue": langue,
                "medecine": medecine,
                "metier_intelligence": metier_intelligence,
                "metier_volonte": metier_volonte,
                "perception": perception,
                "psychologie": psychologie,
                "science": science,
                "sciences_occultes": sciences_occultes,
                "survie": survie,
                "vigilance": vigilance,
                "custom_1": custom_1,
                "custom_2": custom_2,
                "custom_3": custom_3,
                "custom_4": custom_4,
                "points_carac": points_carac,
                "points_comp": points_comp
            });
        });
    });
</script>

<!-- MAJ equipement -->
<script type="text/worker">
    on("change:armes_nom_1 change:armes_nom_2 change:armes_nom_3 change:armes_nom_4", function (eventInfo) {
        const changedAttribute = eventInfo.sourceAttribute; // Attribut déclencheur

        if (changedAttribute.startsWith("armes_nom_")) {
            getAttrs([changedAttribute], function (values) {
                const armeNom = parseInt(values[changedAttribute]) || 0;
                let arme = {
                    designation: "",
                    type: "",
                    degats: " ",
                    portee: "",
                    effet: "",
                    notes: ""
                };

                // Détermine les valeurs en fonction du arme sélectionné
                switch (armeNom) {
                    // Dague
                    case 1:
                        arme = {
                            designation: "Dague",
                            type: "Dague",
                            degats: "1D4",
                            portee: "",
                            effet: "",
                            notes: ""
                        };
                        break;
                    // Épée courte
                    case 2:
                        arme = {
                            designation: "Épée courte",
                            type: "Épée courte",
                            degats: "1D6",
                            portee: "",
                            effet: "",
                            notes: ""
                        };
                        break;
                    // Épée longue
                    case 3:
                        arme = {
                            designation: "Épée longue",
                            type: "Épée longue",
                            degats: "1D6 +1",
                            portee: "",
                            effet: "Ignore 1 point d'armure",
                            notes: ""
                        };
                        break;
                    // Hache
                    case 4:
                        arme = {
                            designation: "Hache",
                            type: "Hache",
                            degats: "1D8",
                            portee: "",
                            effet: "Sur une attaque critique, brise un bouclier",
                            notes: ""
                        };
                        break;
                    // Lance
                    case 5:
                        arme = {
                            designation: "Lance",
                            type: "Lance",
                            degats: "1D6",
                            portee: "2m",
                            effet: "",
                            notes: ""
                        };
                        break;
                    // Masse d'armes
                    case 6:
                        arme = {
                            designation: "Masse d'armes",
                            type: "Masse d'armes",
                            degats: "1D6",
                            portee: "",
                            effet: "Ignore 2 points d'armure",
                            notes: ""
                        };
                        break;
                    // Arc court
                    case 7:
                        arme = {
                            designation: "Arc court",
                            type: "Arc court",
                            degats: "1D6",
                            portee: "20m",
                            effet: "",
                            notes: ""
                        };
                        break;
                    // Arc long
                    case 8:
                        arme = {
                            designation: "Arc long",
                            type: "Arc long",
                            degats: "1D6 +1",
                            portee: "30m",
                            effet: "",
                            notes: ""
                        };
                        break;
                    // Arbalète
                    case 9:
                        arme = {
                            designation: "Arbalète",
                            type: "Arbalète",
                            degats: "1D8",
                            portee: "40m",
                            effet: "Ignore 3 points d'armure",
                            notes: ""
                        };
                        break;
                    
                    // Mains nues
                    case 10:
                        arme = {
                            designation: "Mains nues",
                            type: "Mains nues",
                            degats: "0",
                            portee: "",
                            effet: "",
                            notes: ""
                        };
                        break;
                }

                // Détermine l'index de l'attribut modifié (ex. "1", "2", ou "3")
                const num = changedAttribute.match(/\d+/)[0];

                // Met à jour uniquement les champs liés à l'attribut modifié
                const updates = {};
                updates[`armes_designation_${num}`] = arme.designation;
                updates[`armes_type_${num}`] = arme.type;
                updates[`armes_degats_${num}`] = arme.degats;
                updates[`armes_portee_${num}`] = arme.portee;
                updates[`armes_effet_${num}`] = arme.effet;
                updates[`armes_notes_${num}`] = arme.notes;

                setAttrs(updates);
            });
        }
    });

    on("change:armures_nom_1 change:armures_nom_2 change:armures_nom_3", function (eventInfo) {
        const changedAttribute = eventInfo.sourceAttribute; // Attribut déclencheur

        if (changedAttribute.startsWith("armures_nom_")) {
            getAttrs([changedAttribute], function (values) {
                const armureNom = parseInt(values[changedAttribute]) || 0;
                let armure = {
                    designation: "",
                    type: "",
                    encaissement: "",
                    malus_dexterite: "",
                    malus_athletisme: "",
                    malus_combat_cac: "",
                    malus_combat_pugilat: "",
                    malus_combat_distance: "",
                    malus_discretion: "",
                    malus_esquive: "",
                    notes: ""
                };

                // Détermine les valeurs en fonction de l'armure sélectionnée
                switch (armureNom) {
                    // Vetements renforcés
                    case 1:
                        armure = {
                            designation: "Vêtements renforcés",
                            type: "Vêtements renforcés",
                            encaissement: "1",
                            malus_dexterite: "0",
                            malus_athletisme: "0",
                            malus_combat_cac: "0",
                            malus_combat_pugilat: "0",
                            malus_combat_distance: "0",
                            malus_discretion: "0",
                            malus_esquive: "0",
                            notes: "Peu encombrant, protection minimale"
                        };
                        break;
                    // Cuir bouilli
                    case 2:
                        armure = {
                            designation: "Cuir bouilli",
                            type: "Cuir bouilli",
                            encaissement: "2",
                            malus_dexterite: "5",
                            malus_athletisme: "0",
                            malus_combat_cac: "0",
                            malus_combat_pugilat: "0",
                            malus_combat_distance: "0",
                            malus_discretion: "0",
                            malus_esquive: "0",
                            notes: "Couramment utilisé par les chasseurs"
                        };
                        break;
                    // Armure de mailles
                    case 3:
                        armure = {
                            designation: "Armure de maille",
                            type: "Armure de maille",
                            encaissement: "4",
                            malus_dexterite: "10",
                            malus_athletisme: "5",
                            malus_combat_cac: "2",
                            malus_combat_pugilat: "5",
                            malus_combat_distance: "5",
                            malus_discretion: "5",
                            malus_esquive: "5",
                            notes: "Équilibre entre protection et mobilité"
                        };
                        break;
                    // Armure de plaque
                    case 4:
                        armure = {
                            designation: "Armure de plaques",
                            type: "Armure de plaques",
                            encaissement: "6",
                            malus_dexterite: "20",
                            malus_athletisme: "10",
                            malus_combat_cac: "5",
                            malus_combat_pugilat: "10",
                            malus_combat_distance: "10",
                            malus_discretion: "10",
                            malus_esquive: "10",
                            notes: "Lourde, mais excellente protection"
                        };
                        break;
                }

                // Détermine l'index de l'attribut modifié (ex. "1", "2", ou "3")
                const num = changedAttribute.match(/\d+/)[0];

                // Met à jour uniquement les champs liés à l'attribut modifié
                const updates = {};
                updates[`armures_designation_${num}`] = armure.designation;
                updates[`armures_type_${num}`] = armure.type;
                updates[`armures_encaissement_${num}`] = armure.encaissement;
                updates[`armures_malus_dexterite_${num}`] = armure.malus_dexterite;
                updates[`armures_malus_athletisme_${num}`] = armure.malus_athletisme;
                updates[`armures_malus_combat_cac_${num}`] = armure.malus_combat_cac;
                updates[`armures_malus_combat_pugilat_${num}`] = armure.malus_combat_pugilat;
                updates[`armures_malus_combat_distance_${num}`] = armure.malus_combat_distance;
                updates[`armures_malus_discretion_${num}`] = armure.malus_discretion;
                updates[`armures_malus_esquive_${num}`] = armure.malus_esquive;
                updates[`armures_notes_${num}`] = armure.notes;

                setAttrs(updates);
            });
        }
    });

    on("change:boucliers_nom_1 change:boucliers_nom_2", function (eventInfo) {
        const changedAttribute = eventInfo.sourceAttribute; // Attribut déclencheur

        if (changedAttribute.startsWith("boucliers_nom_")) {
            getAttrs([changedAttribute], function (values) {
                const bouclierNom = parseInt(values[changedAttribute]) || 0;
                let bouclier = {
                    designation: "",
                    type: "",
                    bonus_parade: "",
                    malus_esquive: "",
                    notes: ""
                };

                // Détermine les valeurs en fonction du bouclier sélectionné
                switch (bouclierNom) {
                    // Bouclier rond
                    case 1:
                        bouclier = {
                            designation: "Bouclier rond",
                            type: "Bouclier rond",
                            bonus_parade: "1",
                            malus_esquive: "5",
                            notes: "Facile à manier, améliore la défense"
                        };
                        break;
                    // Pavois
                    case 2:
                        bouclier = {
                            designation: "Pavois",
                            type: "Pavois",
                            bonus_parade: "2",
                            malus_esquive: "10",
                            notes: "Idéal pour tenir une position défensive"
                        };
                        break;
                }

                // Détermine l'index de l'attribut modifié (ex. "1" ou "2")
                const num = changedAttribute.match(/\d+/)[0];

                // Met à jour uniquement les champs liés à l'attribut modifié
                const updates = {};
                updates[`boucliers_designation_${num}`] = bouclier.designation;
                updates[`boucliers_type_${num}`] = bouclier.type;
                updates[`boucliers_bonus_parade_${num}`] = bouclier.bonus_parade;
                updates[`boucliers_malus_esquive_${num}`] = bouclier.malus_esquive;
                updates[`boucliers_notes_${num}`] = bouclier.notes;

                setAttrs(updates);
            });
        }
    });

    on("change:armures_nom_1 change:armures_nom_2 change:armures_nom_3 change:armures_equipe_1 change:armures_equipe_2 change:armures_equipe_3 change:armures_encaissement_1 change:armures_malus_athletisme_1 change:armures_malus_combat_cac_1 change:armures_malus_combat_pugilat_1 change:armures_malus_combat_pugilat_1 change:armures_malus_combat_distance_1 change:armures_malus_discretion_1 change:armures_malus_esquive_1 change:armures_encaissement_2 change:armures_malus_athletisme_2 change:armures_malus_combat_cac_2 change:armures_malus_combat_pugilat_2 change:armures_malus_combat_pugilat_2 change:armures_malus_combat_distance_2 change:armures_malus_discretion_2 change:armures_malus_esquive_2 change:armures_encaissement_3 change:armures_malus_athletisme_3 change:armures_malus_combat_cac_3 change:armures_malus_combat_pugilat_3 change:armures_malus_combat_pugilat_3 change:armures_malus_combat_distance_3 change:armures_malus_discretion_3 change:armures_malus_esquive_3", function() {

        getAttrs(["armures_nom_1","armures_nom_2","armures_nom_3","armures_encaissement_1", "armures_malus_dexterite_1", "armures_malus_athletisme_1", "armures_malus_combat_cac_1", "armures_malus_combat_pugilat_1", "armures_malus_combat_distance_1", "armures_malus_discretion_1", "armures_malus_esquive_1", "armures_encaissement_2", "armures_malus_dexterite_2", "armures_malus_athletisme_2", "armures_malus_combat_cac_2", "armures_malus_combat_pugilat_2", "armures_malus_combat_distance_2", "armures_malus_discretion_2", "armures_malus_esquive_2","armures_encaissement_3", "armures_malus_dexterite_3", "armures_malus_athletisme_3", "armures_malus_combat_cac_3", "armures_malus_combat_pugilat_3", "armures_malus_combat_distance_3", "armures_malus_discretion_3", "armures_malus_esquive_3", "armures_equipe_1", "armures_equipe_2", "armures_equipe_3"], function(values) {
            let armures_encaissement_1 = parseInt(values["armures_encaissement_1"]) || 0;
            let armures_malus_dexterite_1 = parseInt(values["armures_malus_dexterite_1"]) || 0;
            let armures_malus_athletisme_1 = parseInt(values["armures_malus_athletisme_1"]) || 0;
            let armures_malus_combat_cac_1 = parseInt(values["armures_malus_combat_cac_1"]) || 0;
            let armures_malus_combat_pugilat_1 = parseInt(values["armures_malus_combat_pugilat_1"]) || 0;
            let armures_malus_combat_distance_1 = parseInt(values["armures_malus_combat_distance_1"]) || 0;
            let armures_malus_discretion_1 = parseInt(values["armures_malus_discretion_1"]) || 0;
            let armures_malus_esquive_1 = parseInt(values["armures_malus_esquive_1"]) || 0;
            let armures_equipe_1 = parseInt(values["armures_equipe_1"]) || 0;
            let armures_nom_1 = parseInt(values["armures_nom_1"]) || 0;

            let armures_encaissement_2 = parseInt(values["armures_encaissement_2"]) || 0;
            let armures_malus_dexterite_2 = parseInt(values["armures_malus_dexterite_2"]) || 0;
            let armures_malus_athletisme_2 = parseInt(values["armures_malus_athletisme_2"]) || 0;
            let armures_malus_combat_cac_2 = parseInt(values["armures_malus_combat_cac_2"]) || 0;
            let armures_malus_combat_pugilat_2 = parseInt(values["armures_malus_combat_pugilat_2"]) || 0;
            let armures_malus_combat_distance_2 = parseInt(values["armures_malus_combat_distance_2"]) || 0;
            let armures_malus_discretion_2 = parseInt(values["armures_malus_discretion_2"]) || 0;
            let armures_malus_esquive_2 = parseInt(values["armures_malus_esquive_2"]) || 0;
            let armures_equipe_2 = parseInt(values["armures_equipe_2"]) || 0;
            let armures_nom_2 = parseInt(values["armures_nom_2"]) || 0;

            let armures_encaissement_3 = parseInt(values["armures_encaissement_3"]) || 0;
            let armures_malus_dexterite_3 = parseInt(values["armures_malus_dexterite_3"]) || 0;
            let armures_malus_athletisme_3 = parseInt(values["armures_malus_athletisme_3"]) || 0;
            let armures_malus_combat_cac_3 = parseInt(values["armures_malus_combat_cac_3"]) || 0;
            let armures_malus_combat_pugilat_3 = parseInt(values["armures_malus_combat_pugilat_3"]) || 0;
            let armures_malus_combat_distance_3 = parseInt(values["armures_malus_combat_distance_3"]) || 0;
            let armures_malus_discretion_3 = parseInt(values["armures_malus_discretion_3"]) || 0;
            let armures_malus_esquive_3 = parseInt(values["armures_malus_esquive_3"]) || 0;
            let armures_equipe_3 = parseInt(values["armures_equipe_3"]) || 0;
            let armures_nom_3 = parseInt(values["armures_nom_3"]) || 0;
            

            if (armures_equipe_1 == 1) 
                total_armures_encaissement = armures_encaissement_1, 
                total_armures_malus_dexterite = armures_malus_dexterite_1,
                total_armures_malus_athletisme = armures_malus_athletisme_1,
                total_armures_malus_combat_cac = armures_malus_combat_cac_1,
                total_armures_malus_combat_pugilat = armures_malus_combat_pugilat_1,
                total_armures_malus_combat_distance = armures_malus_combat_distance_1,
                total_armures_malus_discretion = armures_malus_discretion_1,
                total_armures_malus_esquive = armures_malus_esquive_1,
                armure_affichee = armures_nom_1,
                armures_equipe_2 = 0,
                armures_equipe_3 = 0;

            else if (armures_equipe_2 == 1) 
                total_armures_encaissement = armures_encaissement_2, 
                total_armures_malus_dexterite = armures_malus_dexterite_2,
                total_armures_malus_athletisme = armures_malus_athletisme_2,
                total_armures_malus_combat_cac = armures_malus_combat_cac_2,
                total_armures_malus_combat_pugilat = armures_malus_combat_pugilat_2,
                total_armures_malus_combat_distance = armures_malus_combat_distance_2,
                total_armures_malus_discretion = armures_malus_discretion_2,
                total_armures_malus_esquive = armures_malus_esquive_2,
                armure_affichee = armures_nom_2,
                armures_equipe_1 = 0,
                armures_equipe_3 = 0;

            else if (armures_equipe_3 == 1) 
                total_armures_encaissement = armures_encaissement_3, 
                total_armures_malus_dexterite = armures_malus_dexterite_3,
                total_armures_malus_athletisme = armures_malus_athletisme_3,
                total_armures_malus_combat_cac = armures_malus_combat_cac_3,
                total_armures_malus_combat_pugilat = armures_malus_combat_pugilat_3,
                total_armures_malus_combat_distance = armures_malus_combat_distance_3,
                total_armures_malus_discretion = armures_malus_discretion_3,
                total_armures_malus_esquive = armures_malus_esquive_3,
                armure_affichee = armures_nom_3,
                armures_equipe_1 = 0,
                armures_equipe_2 = 0;

            else             
            total_armures_encaissement = 0, 
            total_armures_malus_dexterite = 0,
            total_armures_malus_athletisme = 0,
            total_armures_malus_combat_cac = 0,
            total_armures_malus_combat_pugilat = 0,
            total_armures_malus_combat_distance = 0,
            total_armures_malus_discretion = 0,
            total_armures_malus_esquive = 0,
            armure_affichee = 0,
            armures_equipe_1 = 0,
            armures_equipe_2 = 0,
            armures_equipe_3 = 0;
            
            total_armures_malus_demi_dexterite = Math.floor(total_armures_malus_dexterite/2);
            
            setAttrs({
                "total_armures_encaissement": total_armures_encaissement,
                "total_armures_malus_dexterite": total_armures_malus_dexterite,
                "total_armures_malus_demi_dexterite": total_armures_malus_demi_dexterite,
                "total_armures_malus_athletisme": total_armures_malus_athletisme,
                "total_armures_malus_combat_cac": total_armures_malus_combat_cac,
                "total_armures_malus_combat_pugilat": total_armures_malus_combat_pugilat,
                "total_armures_malus_combat_distance": total_armures_malus_combat_distance,
                "total_armures_malus_discretion": total_armures_malus_discretion,
                "total_armures_malus_esquive": total_armures_malus_esquive,
                "armure_affichee": armure_affichee,
                "armures_equipe_1": armures_equipe_1,
                "armures_equipe_2": armures_equipe_2,
                "armures_equipe_3": armures_equipe_3

            });
        });
    });


    on("change:boucliers_nom_1 change:boucliers_nom_2 change:boucliers_equipe_1 change:boucliers_equipe_2 change:boucliers_bonus_parade_1 change:boucliers_bonus_parade_2 change:boucliers_malus_esquive_1 change:boucliers_malus_esquive_2", function() {

        getAttrs(["boucliers_nom_1", "boucliers_nom_1", "boucliers_equipe_1", "boucliers_equipe_2", "boucliers_bonus_parade_1", "boucliers_bonus_parade_2", "boucliers_malus_esquive_1", "boucliers_malus_esquive_2"], function(values) {

            let boucliers_equipe_1 = parseInt(values["boucliers_equipe_1"]) || 0;
            let boucliers_equipe_2 = parseInt(values["boucliers_equipe_2"]) || 0;
            let boucliers_nom_1 = parseInt(values["boucliers_nom_1"]) || 0;
            let boucliers_nom_2 = parseInt(values["boucliers_nom_2"]) || 0;
            let boucliers_bonus_parade_1 = parseInt(values["boucliers_bonus_parade_1"]) || 0;
            let boucliers_bonus_parade_2 = parseInt(values["boucliers_bonus_parade_2"]) || 0;
            let boucliers_malus_esquive_1 = parseInt(values["boucliers_malus_esquive_1"]) || 0;
            let boucliers_malus_esquive_2 = parseInt(values["boucliers_malus_esquive_2"]) || 0;
            

            if (boucliers_equipe_1 == 1) 
                total_boucliers_bonus_parade = boucliers_bonus_parade_1,
                total_boucliers_malus_esquive = boucliers_malus_esquive_1,
                bouclier_affichee = boucliers_nom_1,
                boucliers_equipe_2 = 0;

            else if (boucliers_equipe_2 == 1) 
                total_boucliers_bonus_parade = boucliers_bonus_parade_2,
                total_boucliers_malus_esquive = boucliers_malus_esquive_2,
                bouclier_affichee = boucliers_nom_2,
                boucliers_equipe_1 = 0;

            else             
            total_boucliers_bonus_parade = 0, 
            total_boucliers_malus_esquive = 0,
            bouclier_affichee = 0;
            
            
            setAttrs({
                "total_boucliers_bonus_parade": total_boucliers_bonus_parade,
                "total_boucliers_malus_esquive": total_boucliers_malus_esquive,
                "bouclier_affichee": bouclier_affichee,
                "boucliers_equipe_1": boucliers_equipe_1,
                "boucliers_equipe_2": boucliers_equipe_2
            });
        });
    });

    on("change:constitution change:total_armures_encaissement change:total_boucliers_bonus_parade change:total_boucliers_malus_esquive change:total_armures_malus_esquive", function() {

        getAttrs(["total_boucliers_bonus_parade", "total_boucliers_malus_esquive", "total_armures_malus_esquive", "total_armures_encaissement", "constitution"], function(values) {

            let total_boucliers_bonus_parade = parseInt(values["total_boucliers_bonus_parade"]) || 0;
            let total_boucliers_malus_esquive = parseInt(values["total_boucliers_malus_esquive"]) || 0;
            let total_armures_malus_esquive = parseInt(values["total_armures_malus_esquive"]) || 0;
            let total_armures_encaissement = parseInt(values["total_armures_encaissement"]) || 0;
            let constitution = parseInt(values["constitution"]) || 0;
            let bonus_parade_final = total_boucliers_bonus_parade;
            let malus_esquive_final = total_boucliers_malus_esquive + total_armures_malus_esquive;
            let encaissement = total_armures_encaissement + Math.floor(constitution/10);
            
            
            setAttrs({
                "bonus_parade_final": bonus_parade_final,
                "malus_esquive_final": malus_esquive_final,
                "encaissement": encaissement
            });
        });
    });

    on("change:aura", function() {
        getAttrs(["aura"], function(values) {
            let aura = parseInt(values["aura"]) || 0;
            let valeur_aura = 0;
            let niveau_aura = 0;
    
            // Calcul de `valeur_aura` selon les plages définies
            if (aura >= -12 && aura <= 12) {
                valeur_aura = 0;
            } else if (aura >= 13 && aura <= 25) {
                valeur_aura = 1;
            } else if (aura >= 26 && aura <= 49) {
                valeur_aura = 2;
            } else if (aura >= 50) {
                valeur_aura = 3;
            } else if (aura <= -13 && aura >= -25) {
                valeur_aura = -1;
            } else if (aura <= -26 && aura >= -49) {
                valeur_aura = -2;
            } else if (aura <= -50) {
                valeur_aura = -3;
            }
    
            // Calcul de `niveau_aura` avec limitation entre -10 et 10
            niveau_aura = Math.floor(aura / 5);
            niveau_aura = Math.max(-10, Math.min(10, niveau_aura)); // Limite la plage entre -10 et 10
    
            setAttrs({
                "valeur_aura": valeur_aura,
                "niveau_aura": niveau_aura
            });
        });
    });

    on('clicked:heresie_moins', function() {
        getAttrs(["heresie"], function(values) {
            let heresie = parseInt(values["heresie"]) || 0;
            let heresie_mod = heresie - 1;

            if (heresie_mod < 0) {
                heresie_mod = 0;
            }

            setAttrs({
                "heresie": heresie_mod
            });
        });
    });

    on('clicked:heresie_plus', function() {
        getAttrs(["heresie", "aura"], function(values) {
            let heresie = parseInt(values["heresie"]) || 0;
            let aura = parseInt(values["aura"]) || 0;
            let aura_mod = aura -1;
            let heresie_mod = heresie + 1;

            setAttrs({
                "heresie": heresie_mod,
                "aura": aura_mod
            });
        });
    });

    on('clicked:heroisme_moins', function() {
        getAttrs(["heroisme"], function(values) {
            let heroisme = parseInt(values["heroisme"]) || 0;
            let heroisme_mod = heroisme - 1;

            if (heroisme_mod < 0) {
                heroisme_mod = 0;
            }

            setAttrs({
                "heroisme": heroisme_mod
            });
        });
    });

    on('clicked:heroisme_plus', function() {
        getAttrs(["heroisme", "aura"], function(values) {
            let heroisme = parseInt(values["heroisme"]) || 0;
            let aura = parseInt(values["aura"]) || 0;
            let aura_mod = aura +1;
            let heroisme_mod = heroisme + 1;

            setAttrs({
                "heroisme": heroisme_mod,
                "aura": aura_mod
            });
        });
    });
</script>

<!-- JET DE DÉS -->
<script type="text/worker">
    on('clicked:roll-aura', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Aura}} {{subheader=@{character_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{aura}[Aura]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
        const statValue = Math.abs(stat.result); 
        computeObj.roll = mod.result + statValue;

        const difference = computeObj.roll - des.result;
        const degre = Math.floor(Math.abs(difference) / 10);
        computeObj.degre = degre; 
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})
    
    on('clicked:roll-athletisme-force', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Athlétisme}} {{subheader=Force}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{athletisme_force}[Compétence]-@{total_armures_malus_athletisme}[Malus Armure]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        // Calcul du degré de réussite ou d'échec
        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result; // Différence entre la statistique ajustée et le jet de dés
            degre = Math.floor(difference / 10); // Un degré par palier de 10
        }
        computeObj.degre = degre;

        // Stocker la valeur du degré dans la fiche avec setAttrs
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-athletisme-dex', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Athlétisme}} {{subheader=Dextérité}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{athletisme_dexterite}[Compétence]-@{total_armures_malus_athletisme}[Armure - Malus Athlétisme]-@{total_armures_malus_demi_dexterite}[Armure - Malus Dextérité]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;

        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-baratin-charisme', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Baratin}} {{subheader=Charisme}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{baratin_charisme}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-baratin-force', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Baratin}} {{subheader=Force}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{baratin_force}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-bibliotheque', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Bibliothèque}} {{subheader=Intelligence}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{bibliotheque}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-chercher', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Chercher}} {{subheader=Intelligence}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{chercher}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-cac-dex', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{show_degat=oui}} {{title=Corps à corps}} {{subheader=Dextérité}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{combat_cac_dexterite}[Compétence]-@{total_armures_malus_combat_cac}[Armure - Malus CaC]-@{total_armures_malus_demi_dexterite}[Armure - Malus Dextérité]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}} {{arme1=[@{armes_designation_1}](~weapon_dmg_1)}}  {{arme2=[@{armes_designation_2}](~weapon_dmg_2)}}  {{arme3=[@{armes_designation_3}](~weapon_dmg_3)}} {{arme4=[@{armes_designation_4}](~weapon_dmg_4)}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-cac-force', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{show_degat=oui}} {{title=Corps à corps}} {{subheader=Force}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{combat_cac_force}[Compétence]-@{total_armures_malus_combat_cac}[Armure - Malus CaC]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}} {{arme1=[@{armes_designation_1}](~weapon_dmg_1)}}  {{arme2=[@{armes_designation_2}](~weapon_dmg_2)}}  {{arme3=[@{armes_designation_3}](~weapon_dmg_3)}} {{arme4=[@{armes_designation_4}](~weapon_dmg_4)}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-pugilat', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{show_degat=oui}} {{title=Pugilat}} {{subheader=Force}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{combat_pugilat}[Compétence]-@{total_armures_malus_combat_pugilat}[Armure - Malus Pugilat]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}} {{arme1=[@{armes_designation_1}](~weapon_dmg_1)}}  {{arme2=[@{armes_designation_2}](~weapon_dmg_2)}}  {{arme3=[@{armes_designation_3}](~weapon_dmg_3)}} {{arme4=[@{armes_designation_4}](~weapon_dmg_4)}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-distance', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{show_degat=oui}} {{title=Distance}} {{subheader=Dextérité}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{combat_distance}[Compétence]-@{total_armures_malus_combat_distance}[Armure - Malus CaC]-@{total_armures_malus_demi_dexterite}[Armure - Malus Dextérité]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}} {{arme1=[@{armes_designation_1}](~weapon_dmg_1_distance)}}  {{arme2=[@{armes_designation_2}](~weapon_dmg_2_distance)}}  {{arme3=[@{armes_designation_3}](~weapon_dmg_3_distance)}} {{arme4=[@{armes_designation_4}](~weapon_dmg_4_distance)}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-discretion', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Discrétion}} {{subheader=Dextérité}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{discretion}[Compétence]-@{total_armures_malus_discretion}[Armure - Malus Discrétion]-@{total_armures_malus_demi_dexterite}[Armure - Malus Dextérité]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_discretion}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-endurance', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Endurance}} {{subheader=Constitution}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{endurance}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}}{{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-esquive', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Esquive}} {{subheader=Dextérité}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{esquive}[Compétence]-@{total_armures_malus_esquive}[Armure - Malus Esquive]-@{total_boucliers_malus_esquive}[Bouclier - Malus Esquive]-@{total_armures_malus_demi_dexterite}[Armure - Malus Dextérité]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_discretion}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-ancienne-intel', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Langue ancienne}} {{subheader=Intelligence}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{langue_ancienne_intelligence}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-ancienne-volonte', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Langue ancienne}} {{subheader=Volonté}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{langue_ancienne_volonte}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-langue', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Langue}} {{subheader=Intelligence}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{langue}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-medecine', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Médecine}} {{subheader=Intelligence}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{medecine}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-metier-intell', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Métier}} {{subheader=Intelligence}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{metier_intelligence}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-metier-volonte', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Métier}} {{subheader=Volonté}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{metier_volonte}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-perception', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Perception}} {{subheader=Volonté}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{perception}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-psychologie', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Psychologie}} {{subheader=Intelligence}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{psychologie}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-sciences', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Sciences}} {{subheader=Intelligence}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{science}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-sciences-occultes', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Sciences occultes}} {{subheader=Volonté}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{sciences_occultes}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-survie', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Survie}} {{subheader=Intelligence}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{survie}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-vigilance', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Vigilance}} {{subheader=Dextérité}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{vigilance}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-custom1', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=@{stat_1_name}}} {{subheader=@{comp_1_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{custom_1}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-custom2', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=@{stat_2_name}}} {{subheader=@{comp_2_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{custom_2}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-custom3', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=@{stat_3_name}}} {{subheader=@{comp_3_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{custom_3}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-custom4', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=@{stat_4_name}}} {{subheader=@{comp_4_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{custom_4}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;
        
        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-force', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Force}} {{subheader=@{character_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{force}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;

        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})    

    on('clicked:roll-dexterite', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Dextérité}} {{subheader=@{character_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{dexterite}[Compétence]-@{total_armures_malus_demi_dexterite}[Armure - Malus Dextérité]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;

        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-constitution', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Constitution}} {{subheader=@{character_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{constitution}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;

        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-intelligence', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Intelligence}} {{subheader=@{character_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{intelligence}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;

        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-charisme', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Charisme}} {{subheader=@{character_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{charisme}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;

        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-volonte', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Volonté}} {{subheader=@{character_name}}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{volonte}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{malus_armure=@{total_armures_malus_athletisme}}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus,malus_blessure} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result - malus_blessure.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;

        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:roll-sm', async (event) => {
		const roll = await startRoll("&{template:thanatos} {{jet=oui}} {{pnj=oui}} {{title=Santé mentale}} {{subheader=Jet de Volonté}} {{roll=[[0[resultat]]]}} {{malus_blessure=[[@{malus_blessure}]]}} {{stat=[[@{volonte}[Compétence]]]}} {{des=[[1d100[Jet]]]}} {{mod=[[@{rollmodifier}[Modificateur]]]}} {{degre=[[0[resultat]]]}}"); 
		const {stat,des,mod,malus} = roll.results;
		const computeObj = {};
		computeObj.roll = mod.result + stat.result;

        let degre = 0;
        if (des.result <= computeObj.roll) {
            const difference = computeObj.roll - des.result;
            degre = Math.floor(difference / 10);
        }
        computeObj.degre = degre;

        setAttrs({
            bonus_reussite: degre
        });

	finishRoll(roll.rollId,computeObj);
	})

    on('clicked:hide_info', async (event) => {
		getAttrs(["info_reduit"], function(values) {
            let info_reduit = parseInt(values["info_reduit"]) || 0;
            if (info_reduit == 0) info_reduit = 1;
            else info_reduit = 0;
        setAttrs({
            "info_reduit": info_reduit			
            });
        });
    });

    on('clicked:hide_hero', async (event) => {
		getAttrs(["hero_reduit"], function(values) {
            let hero_reduit = parseInt(values["hero_reduit"]) || 0;
            if (hero_reduit == 0) hero_reduit = 1;
            else hero_reduit = 0;
        setAttrs({
            "hero_reduit": hero_reduit			
            });
        });
    });

    on('clicked:hide_carac', async (event) => {
		getAttrs(["carac_reduit"], function(values) {
            let carac_reduit = parseInt(values["carac_reduit"]) || 0;
            if (carac_reduit == 0) carac_reduit = 1;
            else carac_reduit = 0;
        setAttrs({
            "carac_reduit": carac_reduit			
            });
        });
    });

    on('clicked:hide_competence', async (event) => {
		getAttrs(["competence_reduit"], function(values) {
            let competence_reduit = parseInt(values["competence_reduit"]) || 0;
            if (competence_reduit == 0) competence_reduit = 1;
            else competence_reduit = 0;
        setAttrs({
            "competence_reduit": competence_reduit			
            });
        });
    });

    on('clicked:hide_armement', async (event) => {
		getAttrs(["armement_reduit"], function(values) {
            let armement_reduit = parseInt(values["armement_reduit"]) || 0;
            if (armement_reduit == 0) armement_reduit = 1;
            else armement_reduit = 0;
        setAttrs({
            "armement_reduit": armement_reduit			
            });
        });
    });

    on('clicked:hide_inventaire', async (event) => {
		getAttrs(["inventaire_reduit"], function(values) {
            let inventaire_reduit = parseInt(values["inventaire_reduit"]) || 0;
            if (inventaire_reduit == 0) inventaire_reduit = 1;
            else inventaire_reduit = 0;
        setAttrs({
            "inventaire_reduit": inventaire_reduit			
            });
        });
    });

on('clicked:change_avatar', async (event) => {
    getAttrs(["avatar"], function(values) {
        let avatar = (parseInt(values["avatar"]) || 0) + 1;
        avatar %= 7; // Remet à 0 après 6
        setAttrs({
            "avatar": avatar
        });
    });
});

on('clicked:fermer-popup', async (event) => {
    getAttrs(["popup_sm"], function(values) {
        let popup_sm = 0;
        setAttrs({
            "popup_sm": popup_sm
        });
    });
});

on('clicked:compendium_sm', async (event) => {
    getAttrs(["page_compendium"], function(values) {
        let page_compendium = 1;
        setAttrs({
            "page_compendium": page_compendium
        });
    });
});

on('clicked:compendium_hero', async (event) => {
    getAttrs(["page_compendium"], function(values) {
        let page_compendium = 2;
        setAttrs({
            "page_compendium": page_compendium
        });
    });
});

on('clicked:compendium_combat', async (event) => {
    getAttrs(["page_compendium"], function(values) {
        let page_compendium = 3;
        setAttrs({
            "page_compendium": page_compendium
        });
    });
});


</script>


<!-- GESTION PALIERS SM -->
<script type="text/worker">
    on("change:intelligence change:sm", function() {
        getAttrs(["intelligence", "sm", "alerte_sm_50", "alerte_sm_25", "alerte_sm_75"], function(values) {
    
            let intelligence = parseInt(values["intelligence"]) || 0;
            let sm = parseInt(values["sm"]) || 0;
            let sm_maxi = 100 - intelligence; // Calcul du niveau maximal de santé mentale
            let niveau_sm = Math.floor((sm / sm_maxi) * 100);
    
            // Récupération des anciennes alertes
            let old_alerte_sm_75 = parseInt(values["alerte_sm_75"]) || 0;
            let old_alerte_sm_50 = parseInt(values["alerte_sm_50"]) || 0;
            let old_alerte_sm_25 = parseInt(values["alerte_sm_25"]) || 0;
    
            // Initialisation des nouvelles alertes
            let new_alerte_sm_75 = 0;
            let new_alerte_sm_50 = 0;
            let new_alerte_sm_25 = 0;
    
            // Attribut pour la gestion du popup
            let popup_sm = "";
    
            // Vérification des seuils et mise à jour des alertes
            if (niveau_sm > 75) {
                new_alerte_sm_75 = 1;
                if (old_alerte_sm_75 === 0) popup_sm = "75";
            }
            if (niveau_sm <= 50 && niveau_sm > 25) {
                new_alerte_sm_50 = 1;
                if (old_alerte_sm_50 === 0) popup_sm = "50";
            }
            if (niveau_sm <= 25) {
                new_alerte_sm_25 = 1;
                if (old_alerte_sm_25 === 0) popup_sm = "25";
            }
    
            // Mise à jour des attributs
            setAttrs({
                "niveau_sm": niveau_sm,
                "alerte_sm_75": new_alerte_sm_75,
                "alerte_sm_50": new_alerte_sm_50,
                "alerte_sm_25": new_alerte_sm_25,
                "popup_sm": popup_sm // Attribut qui déclenche le popup
            });
        });
    });
</script>
